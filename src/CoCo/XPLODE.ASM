00001 	ORG	$4E00
00002 XPLODE	JSR	REVERS
00003 	JSR	$5D0B
00004 	JSR	$5D0B
00005 	JSR	$5D0B
00006 	JSR	$5D0B
00007 	JSR	REVERS
00008 	LDX	#PNTTBL
00009 	LDY	#COLTBL
00010 	LDB	#60
00011 	STB	PNTCNT
00012 STPNT	LDB	#184
00013 	LDA	SHPPOS
00014 	ADDA	#7
00015 	LSLA
00016 	STB	3,X
00017 	STA	2,X
00018 	STA	,X
00019 	LDA	$5D3F
00020 	ANDA	#3
00021 	LDA	A,Y
00022 	STA	1,X
00023 	JSR	$5D21
00024 	LDD	$5D3F
00025 	ANDA	#$87
00026 	ANDB	#15
00027 	CMPB	#12
00028 	BCS	YVECOK
00029 	SUBB	#8
00030 YVECOK	STA	4,X
00031 	ORB	#$80
00032 	STB	5,X
00033 	LDB	$5D40
00034 	LSRB
00035 	LSRB
00036 	LSRB
00037 	ANDB	#3
00038 	STB	6,X
00039 	LEAX	7,X
00040 	DEC	PNTCNT
00041 	BNE	STPNT
00042 CNTLP1	LDX	#PNTTBL
00043 	CLR	CNTPNT
00044 	LDB	#60
00045 	STB	PNTCNT
00046 CNTLOP	TST	,X
00047 	BEQ	NTHERE
00048 	TST	6,X
00049 	BEQ	NODEC
00050 	DEC	6,X
00051 	BRA	THERE
00052 NODEC	CLR	$5DBD
00053 	LDD	2,X
00054 	LSRA
00055 	LSRB
00056 	STA	$5DBE
00057 	STB	$5DBF
00058 	JSR	$5D8F
00059 	JSR	ADDX
00060 	JSR	ADDY
00061 	TST	,X
00062 	BEQ	NTHERE
00063 	LDD	2,X
00064 	LSRA
00065 	LSRB
00066 	STA	$5DBE
00067 	STB	$5DBF
00068 	LDA	1,X
00069 	STA	$5DBD
00070 	JSR	$5D8F
00071 	JSR	$5D0B
00072 	BRA	THERE
00073 NTHERE	INC	CNTPNT
00074 	PSHS	X
00075 	LDX	#75
00076 DELOOP	LEAX	-1,X
00077 	BNE	DELOOP
00078 	PULS	X
00079 THERE	LEAX	7,X
00080 	DEC	PNTCNT
00081 	BNE	CNTLOP
00082 	LDA	CNTPNT
00083 	CMPA	#60
00084 	BNE	CNTLP1
00085 LAST	JMP	[$5AA1]
00086 REVERS	PSHS	X,B,A
00087 	LDX	$5D8D
00088 RVRS1	LDD	,X
00089 	COMA
00090 	COMB
00091 	STD	,X++
00092 	CMPX	#$1A00
00093 	BLO	RVRS1
00094 	LDX	#$500
00095 LOPDEL	LEAX	-1,X
00096 	BNE	LOPDEL
00097 	PULS	A,B,X,PC
00098 PNTCNT	FCB	0
00099 CNTPNT	FCB	0
00100 SHPPOS	EQU	$5AA5
00101 COLTBL	FCB	$AA
00102 	FCB	$55
00103 	FCB	$AA
00104 	FCB	$FF
00105 ADDY	LDA	5,X
00106 	BITA	#$80
00107 	BEQ	ADYPOS
00108 	ANDA	#15
00109 	STA	,-S
00110 	LDA	3,X
00111 	SUBA	,S+
00112 	CMPA	#18
00113 	BCS	GONEY
00114 	BRA	RNDMTY
00115 ADYPOS	ANDA	#15
00116 	ADDA	3,X
00117 	CMPA	#192
00118 	BCC	GONEY
00119 RNDMTY	STA	3,X
00120 	JSR	$5D21
00121 	LDA	$5D3F
00122 	ANDA	#$80
00123 	BEQ	NEXT
00124 	RTS
00125 NEXT	LDA	5,X
00126 	ANDA	#15
00127 	BNE	RDMTY1
00128 	STA	5,X
00129 RDMTY1	LDA	5,X
00130 	BITA	#$80
00131 	BEQ	INCMTY
00132 	DEC	5,X
00133 	RTS
00134 INCMTY	INC	5,X
00135 	RTS
00136 GONEY	CLR	,X
00137 	RTS
00138 ADDX	LDA	4,X
00139 	BITA	#$80
00140 	BEQ	ADXPOS
00141 	ANDA	#7
00142 	BEQ	GONEX
00143 	STA	,-S
00144 	LDA	2,X
00145 	SUBA	,S+
00146 	BCS	GONEX
00147 	BRA	DONEX
00148 ADXPOS	ANDA	#7
00149 	BEQ	GONEX
00150 	ADDA	2,X
00151 	BCS	GONEX
00152 DONEX	STA	2,X
00153 	RTS
00154 GONEX	CLR	,X
00155 	RTS
00156 PNTTBL	RMB	450
00157 	FCC	/(C) 1984 BY DAVE SHADOFF/
00158 LASTBT	EQU	.-1
00159 	END	XPLODE
