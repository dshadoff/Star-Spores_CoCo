00001 	ORG	$5D0B
00002 RNDSND	JSR	RNDOM
00003 	LDD	RNDNO
00004 	LSRB
00005 	LSRB
00006 	CLRA
00007 	INCB
00008 	STD	NOISE1
00009 	STD	NOISE2
00010 	JSR	NOISE
00011 	JMP	NOISE
00012 RNDOM	PSHS	X,B,A
00013 	LDX	RNDCNT
00014 	LDD	RNDNO
00015 	EORA	B,X
00016 	EORB	A,X
00017 	LEAX	2,X
00018 	CMPX	#$BF00
00019 	BLO	NEXT
00020 	LDX	#$A000
00021 NEXT	STX	RNDCNT
00022 	STD	RNDNO
00023 	PULS	A,B,X,PC
00024 RNDNO	FDB	0
00025 RNDCNT	FDB	$A000
00026 NOISBT	FCB	0
00027 NOISE	PSHS	X,B,A
00028 	LDA	$FF01
00029 	ANDA	#$F7
00030 	STA	$FF01
00031 	LDA	$FF03
00032 	ANDA	#$F7
00033 	STA	$FF03
00034 	LDA	$FF23
00035 	ORA	#8
00036 	STA	$FF23
00037 	LDA	NOISBT
00038 	JSR	RNDOM
00039 	LDB	RNDNO
00040 	ANDB	#$FC
00041 	STB	,-S
00042 	EORA	,S+
00043 	STA	NOISBT
00044 	STA	$FF20
00045 	LDX	#1
00046 NOISE1	EQU	.-2
00047 NOSLP1	LEAX	-1,X
00048 	BNE	NOSLP1
00049 	STB	,-S
00050 	EORA	,S+
00051 	STA	NOISBT
00052 	STA	$FF20
00053 	LDX	#1
00054 NOISE2	EQU	.-2
00055 NOSLP2	LEAX	-1,X
00056 	BNE	NOSLP2
00057 	PULS	A,B,X,PC
00058 LAST	EQU	.-1
00059 	END
