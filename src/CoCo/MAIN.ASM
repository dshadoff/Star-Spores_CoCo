00001 	ORG	$2D00
00002 ORIGIN	JSR	CLRSTR
00003 	LDD	$B4B3
00004 	CMPD	#$2843
00005 	BNE	ORGN1
00006 	LDA	#16
00007 	STA	JOYN4
00008 	STA	JOYN5
00009 	LDA	#32
00010 	STA	JOYN1
00011 	STA	JOYN2
00012 	STA	JOYN3
00013 ORGN1	CLR	$FF40
00014 	LDA	#$34
00015 	STA	$FF03
00016 	LDA	#$3C
00017 	STA	$FF23
00018 	LDX	#$5640
00019 	LDS	#$7F00
00020 	LDY	#$400
00021 ORGLOP	TFR	X,D
00022 	STB	,-S
00023 	LDA	,X+
00024 	EORA	#$75
00025 	NEGA
00026 	ADDA	#$38
00027 	EORA	,S+
00028 	STA	,Y+
00029 	CMPX	#$5840
00030 	BLO	ORGLOP
00031 	LDA	#$60
00032 ORGLP1	STA	,Y+
00033 	CMPY	#$A00
00034 	BLO	ORGLP1
00035 ORGLP5	NOP
00036 	LDX	#$E00
00037 	LDD	#$AAAA
00038 ORGLP4	STD	,X++
00039 	CMPX	#$1A00
00040 	BLO	ORGLP4
00041 	LDX	#ORGLP5
00042 	STX	<$72
00043 	LDA	#$55
00044 	STA	<$71
00045 	LDA	$FF22
00046 	ORA	#$F8
00047 	STA	$FF22
00048 	STA	$FFC0
00049 	STA	$FFC2
00050 	STA	$FFC5
00051 	STA	$FFC7
00052 	STA	$FFC9
00053 	STA	$FFCB
00054 ORGLP6	JSR	[$A000]
00055 	CMPA	#$0D
00056 	BNE	ORGLP6
00057 	LDX	#$400
00058 ORGLP2	LDA	,X
00059 	STA	$200,X
00060 	STA	$400,X
00061 	LDA	$1E0,X
00062 	STA	$3E0,X
00063 	STA	$5E0,X
00064 	LEAX	1,X
00065 	CMPX	#$420
00066 	BLO	ORGLP2
00067 ORGLP3	LDA	,X
00068 	STA	$200,X
00069 	STA	$201,X
00070 	STA	$400,X
00071 	STA	$401,X
00072 	LDA	$1E,X
00073 	STA	$21E,X
00074 	STA	$21F,X
00075 	STA	$41E,X
00076 	STA	$41F,X
00077 	LEAX	$20,X
00078 	CMPX	#$5E0
00079 	BLO	ORGLP3
00080 	LDX	#$62A
00081 	LDU	#HSMSG
00082 	JSR	PRNSTR
00083 	LDX	#$8AC
00084 	LDU	#PLCNMS
00085 	JSR	PRNSTR
00086 	LDX	#$90B
00087 	LDU	#SPCMSG
00088 	JSR	PRNSTR
00089 	LDX	#$8E8
00090 	LDU	#CNGRMS
00091 	JSR	PRNSTR
00092 	LDX	#$673
00093 	LDA	#$70
00094 	CLR 	LINCNT
00095 ORGLP9	LDB	#6
00096 	STB	CNLIN1
00097 ORGLPA	STA	,X+
00098 	DEC	CNLIN1
00099 	BNE	ORGLPA
00100 	LEAX	$1A,X
00101 	LDB	LINCNT
00102 	ADDB	#$71
00103 	STB	-44,X
00104 	LDB	#$6E
00105 	STB	-43,X
00106 	LDB	LINCNT
00107 	INCB
00108 	STB	LINCNT
00109 	CMPB	#10
00110 	BLO	ORGLP9
00111 	LDB	#$71
00112 	STB	$786
00113 	DECB
00114 	STB	$787
00115 TITLP2	STA	$FFC0
00116 	STA	$FFC2
00117 	STA	$FFC4
00118 	LDA	$FF22
00119 	ANDA	#7
00120 	STA	$FF22
00121 	STA	$FFC6
00122 	STA	$FFC9
00123 	STA	$FFCA
00124 	LDA	#$B0
00125 	STA	WHOP+2
00126 	JSR	WHOP
00127 	LDA	#$76
00128 	STA	WHOP+2
00129 	LDA	#1
00130 	STA	$153
00131 	STA	$154
00132 	CLR	BTN1
00133 	CLR	BTN2
00134 TITLEP	STA	$FFC6
00135 	STA	$FFC9
00136 	STA	$FFCA
00137 	LDS	#$7F00
00138 	JSR	ROTATE
00139 	LDX	#$40
00140 INPLOP	PSHS	X
00141 	JSR	[$A000]
00142 	TSTA
00143 	BNE	INLPOT
00144 	JSR	BUTON
00145 	TSTA
00146 	BNE	INLPOT
00147 	PULS	X
00148 	LEAX	-1,X
00149 	BNE	INPLOP
00150 	BRA	TITLEP
00151 INLPOT	PULS	X
00152 HSPAGE	STA	$FFC7
00153 	STA	$FFC9
00154 	STA	$FFCA
00155 	LDU	#JKMSG
00156 	LDX	#$7C5
00157 	JSR	PRNSTR
00158 	JSR	WHOP1
00159 	CLR	CNTER8
00160 	CLR	CNTER8+1
00161 HSPG1	JSR	ROTATE
00162 	LDX	CNTER8
00163 	LEAX	1,X
00164 	CMPX	#$120
00165 	BEQ	TITLEP
00166 	STX	CNTER8
00167 	LDX	#$40
00168 INLP1	PSHS	X
00169 	JSR	[$A000]
00170 	CMPA	#$20
00171 	LBEQ	INLP1T
00172 	CMPA	#$4A
00173 	BEQ	INLP1S
00174 	CMPA	#$4B
00175 	BEQ	INLP1S
00176 	CMPA	#$6A
00177 	BEQ	INLP1S
00178 	CMPA	#$6B
00179 	BEQ	INLP1S
00180 	JSR	BUTON
00181 	TSTA
00182 	BNE	INLP1T
00183 	PULS	X
00184 	LEAX	-1,X
00185 	BNE	INLP1
00186 	BRA	HSPG1
00187 INLP1S	PULS	X
00188 	ANDA	#$4F
00189 	SUBA	#$4A
00190 	STA	JOYKEY
00191 	LDU	#PLMSG
00192 	LDX	#$7C5
00193 	JSR	PRNSTR
00194 HSPG2	JSR	ROTATE
00195 	LDX	CNTER8
00196 	LEAX	1,X
00197 	CMPX	#$120
00198 	LBEQ	TITLEP
00199 	STX	CNTER8
00200 	LDX	#$40
00201 INLP2	PSHS	X
00202 	JSR	[$A000]
00203 	CMPA	#$20
00204 	BEQ	INLP1T
00205 	CMPA	#$31
00206 	BEQ	PLY1
00207 	CMPA	#$32
00208 	BEQ	PLY2
00209 	JSR	BUTON
00210 	TSTA
00211 	BNE	INLP1T
00212 	PULS	X
00213 	LEAX	-1,X
00214 	BNE	INLP2
00215 	BRA	HSPG2
00216 PLY1	PULS	X
00217 	CLR	NOPLAY
00218 	JMP	GAME
00219 PLY2	PULS	X
00220 	LDA	#1
00221 	STA	NOPLAY
00222 	JMP	GAME
00223 INLP1T	PULS	X
00224 	CMPA	#$20
00225 	BEQ	KEYB
00226 	CLR	JOYKEY
00227 	JMP	GAME
00228 KEYB	LDA	#1
00229 	STA	JOYKEY
00230 	JMP	GAME
00231 	JMP	GAME
00232 BUTON	LDA	BTN1
00233 	STA	BTN2
00234 	LDA	#$FF
00235 	STA	$FF02
00236 	LDA	$FF00
00237 	COMA
00238 	ANDA	#3
00239 	STA	BTN1
00240 	EORA	#3
00241 	ANDA	BTN2
00242 	RTS
00243 ROTATE	LDX	#$400
00244 ROTAT1	LDA	,X
00245 	CMPA	#$80
00246 	BCS	LOWER
00247 	SUBA	#$10
00248 	CMPA	#$80
00249 	BCC	HIGHER
00250 	ADDA	#$80
00251 HIGHER	STA	,X
00252 LOWER	LEAX	1,X
00253 	CMPX	#$A00
00254 	BLO	ROTAT1
00255 	RTS
00256 JKMSG	FCC	/JOYSTICK OR KEYBOARD ? /
00257 	FCB	0
00258 PLMSG	FCC	/   1 OR 2 PLAYERS ?    /
00259 	FCB	0
00260 HSMSG	FCC	/HIGH SCORES/
00261 	FCB	0
00262 PLCNMS	FCC	/PLAYER 1/
00263 	FCB	0
00264 CNGRMS	FCC	/ENTER YOUR NAME/
00265 	FCB	0
00266 SPCMSG	FCC	/>        </
00267 	FCB	0
00268 CNTER8	FDB	0
00269 BTN1	FCB	0
00270 BTN2	FCB	0
00271 CNSTNT	EQU	SCRSTB-SCRTBL
00272 XPLODE	EQU	$4E00
00273 GAME	CLR	PLYNO
00274 	LDA	$FF22
00275 	ORA	#$F8
00276 	STA	$FF22
00277 	STA	$FFC5
00278 	STA	$FFC2
00279 	STA	$FFC0
00280 	LDX	#$FFC6
00281 	LDD	#$0707
00282 NXTBIT	LSRA
00283 	BCS	HIGH
00284 LOW	STA	,X++
00285 	BRA	NXTBT1
00286 HIGH	LEAX	1,X
00287 	STA	,X+
00288 NXTBT1	DECB
00289 	BNE	NXTBIT
00290 	LDX	#$E00
00291 	STX	SCRST
00292 	LDX	SCRST
00293 	LDD	#$0
00294 CLSLOP	STD	,X++
00295 	CMPX	#$1A00
00296 	BLO	CLSLOP
00297 	LDY	#SHTTBL
00298 	LDA	#40
00299 CLRSHT	CLR	,Y+
00300 	DECA
00301 	BNE	CLRSHT
00302 	LDY	#SCRTBL
00303 	LEAX	CNSTNT,Y
00304 	LDB	#80
00305 CLRSCR	CLR	,Y+
00306 	CLR	,X+
00307 	DECB
00308 	BNE	CLRSCR
00309 	LDX	#PLY1SC
00310 	LDY	#PLY2SC
00311 	LDA	#6
00312 	LDB	#$0A
00313 SCCLLP	CLR	,X+
00314 	CLR	,Y+
00315 	DECA
00316 	BNE	SCCLLP
00317 	STB	,X+
00318 	STB	,Y+
00319 	CLR	,X+
00320 	CLR	,Y+
00321 	LDB	#3
00322 	STB	,X
00323 	STB	,Y
00324 	LDY	#SCRTBL
00325 	LDX	#PLY1SC
00326 	STX	3,Y
00327 	LDA	#9
00328 	STA	2,Y
00329 	LDA	#1
00330 	STA	,Y
00331 	STA	1,Y
00332 	STA	5,Y
00333 	LDA	PLYNO
00334 	LDX	#CLTBL2
00335 	LDA	A,X
00336 	STA	6,Y
00337 	LEAY	7,Y
00338 	LDX	#PLY2SC
00339 	STX	3,Y
00340 	LDA	#9
00341 	STA	2,Y
00342 	LDA	#1
00343 	STA	1,Y
00344 	STA	5,Y
00345 	LDA	#92
00346 	STA	,Y
00347 	TST	NOPLAY
00348 	BNE	STSCUP
00349 	CLR	8,X
00350 STSCUP	LDA	PLYNO
00351 	LDX	#CLTBL2
00352 	EORA	#1
00353 	LDA	A,X
00354 	STA	6,Y
00355 	LDX	$5D8D
00356 	CLRB
00357 	LDU	#$59A0
00358 STUPSC	LDA	,U+
00359 	STA	,X+
00360 	DECB
00361 	BNE	STUPSC
00362 	LDX	#AFTXPD
00363 	STX	$5AA1
00364 	LDD	$112
00365 	STB	$5D42
00366 	STA	$5D3F
00367 	EORA	$B000
00368 	STA	$5D40
00369 	LDA	#$3A
00370 	STA	SHPPOS
00371 	STA	SHPOS1
00372 	CLR	SHOT1F
00373 	CLR	SHOT2F
00374 	LDA	#1
00375 	STA	BROND1
00376 	STA	BROND2
00377 	STA	NOWGUY
00378 	STA	NWGY1
00379 	CLR	BEEPER
00380 	CLR	BEEPR1
00381 	LDA	#4
00382 	STA	SPXCNT
00383 	JSR	NUMPUT
00384 	JSR	PLYMS
00385 SHEET	CLR	ALARM
00386 	CLR	HTPOD
00387 	LDU	#TABX
00388 	LDB	#8
00389 	STB	LOOPER
00390 TBXCL	CLR	,U+
00391 	DEC	LOOPER
00392 	BNE	TBXCL
00393 	CLR	ALARM1
00394 	JSR	LEVELS
00395 	CLR	BONCNT
00396 	LDA	#$28
00397 	STA	CNTER
00398 	CLR	TMCRTC
00399 	LDA	#$FF
00400 	STA	BARCOL
00401 	LDA	#40
00402 	STA	BONAMT
00403 	CLR	SHTTHR
00404 	CLR	SHPZAP
00405 	LBRA	BONCHK
00406 CHEKD1	LDU	#XPOS
00407 	LDB	#8
00408 	STB	CNTDED
00409 	STB	LOOPER
00410 STRTLP	CLR	4,U
00411 	CLR	5,U
00412 RNDXNX	JSR	$5D21
00413 	LDA	$5D3F
00414 	ANDA	#$7F
00415 	CMPA	#2
00416 	BLO	RNDXNX
00417 	CMPA	#$78
00418 	BLO	GOODX
00419 	BRA	RNDXNX
00420 GOODX	STA	,U
00421 BADY	JSR	$5D21
00422 	LDA	$5D3F
00423 	ANDA	#$3F
00424 	CMPA	#9
00425 	BLO	BADY
00426 	CMPA	#$30
00427 	BLO	GOODY
00428 	SUBA	#$18
00429 GOODY	STA	1,U
00430 BADPOS	JSR	$5D21
00431 	LDA	$5D3F
00432 	CMPA	#$AA
00433 	BLO	GDPOS
00434 	SUBA	#$59
00435 GDPOS	TFR	A,B
00436 	CLRA
00437 	LDX	#$5BDC
00438 	LEAX	D,X
00439 	STX	6,U
00440 	LDA	5,U
00441 	LSLA
00442 	LDX	#$5DDF
00443 	LDX	A,X
00444 	STX	8,U
00445 	LDA	#1
00446 	STA	10,U
00447 	LEAU	11,U
00448 	DEC	LOOPER
00449 	BNE	STRTLP
00450 CHKED	JSR	ON
00451 	LDU	#XPOS
00452 	LDB	#8
00453 	STB	LOOPER
00454 STMVLP	JSR	SPORMV
00455 	LEAU	11,U
00456 	DEC	LOOPER
00457 	BNE	STMVLP
00458 LOP	JSR	NUMPUT
00459 	JSR	TIME
00460 	JSR	MOVSHP
00461 	JSR	MOVSTR
00462 	LDX	LEVDEL
00463 	LDA	#20
00464 	LDB	SCROFF
00465 	MUL
00466 	COMA
00467 	COMB
00468 	ADDD	#1
00469 	LEAX	D,X
00470 	TST	STRCNT
00471 	BNE	DESAME
00472 	CMPX	#$380
00473 	BCS	DELESS
00474 	LEAX	-896,X
00475 	BRA	DESAME
00476 DELESS	LDX	#1
00477 DESAME	STX	DELAY
00478 	LDX	DELAY
00479 POLLOP	LEAX	-1,X
00480 	BNE	POLLOP
00481 	LDS	#$7F00
00482 	JSR	BEEPIT
00483 	TST	CNTDED
00484 	BNE	MOVEIT
00485 	TST	SHTTHR
00486 	BNE	MOVEIT
00487 	TST	SCROFF
00488 	BNE	MOVEIT
00489 	DEC	CNTER
00490 	LBEQ	BPOINT
00491 MOVEIT	JSR	$5D21
00492 	JSR	UPDSHT
00493 	JSR	DOSHOT
00494 	LDU	#XPOS
00495 	LDB	#8
00496 	STB	LOOPER
00497 CKHTL1	TST	10,U
00498 	BEQ	CKHTL2
00499 	JSR	HITCHK
00500 CKHTL2	LEAU	11,U
00501 	DEC	LOOPER
00502 	BNE	CKHTL1
00503 	INC	CYCLE
00504 	LDA	CYCLE
00505 	CMPA	#2
00506 	BNE	LOP
00507 	CLR	CYCLE
00508 	INC	CYCLE1
00509 	LDA	CYCLE1
00510 	CMPA	#4
00511 	BNE	CYCLE2
00512 	CLR	CYCLE1
00513 CYCLE2	CLR	ALARM
00514 	LDU	#XPOS
00515 	LDB	#8
00516 	STB	LOOPER
00517 ERPTLP	JSR	$560F
00518 	JSR	$5D21
00519 	JSR	SPORMV
00520 	LEAU	11,U
00521 	DEC	LOOPER
00522 	BNE	ERPTLP
00523 	LDU	#XPOS
00524 	LDB	#8
00525 	STB	LOOPER
00526 PTSPLP	LDA	BROUND
00527 	CMPA	#3
00528 	BNE	PTSPL1
00529 	TST	CYCLE1
00530 	BNE	PTSPL2
00531 PTSPL1	JSR	$55B5
00532 PTSPL2	LEAU	11,U
00533 	DEC	LOOPER
00534 	BNE	PTSPLP
00535 	JSR	PUTSTR
00536 	JSR	PUTX
00537 	LBRA	LOP
00538 TIME	TST	CNTDED
00539 	BNE	TIME1
00540 	RTS
00541 TIME1	LDA	BONCNT
00542 	INCA
00543 	STA	BONCNT
00544 	CMPA	BONBYT
00545 	BNE	BONRET
00546 	CLR	BONCNT
00547 	DEC	BONAMT
00548 	LBEQ	ZAPIT
00549 	JSR	TMLNPT
00550 	LDA	BONAMT
00551 CLICK	CLRA
00552 	LDB	BONAMT
00553 	LSLB
00554 	ADDB	#$10
00555 	STD	$5CF2
00556 	STD	$5D03
00557 	JSR	$5CC8
00558 	JSR	$5CC8
00559 	JSR	$5CC8
00560 	JSR	$5CC8
00561 BONRET	LDA	TMCRTC
00562 	TSTA
00563 	BEQ	NOCRTC
00564 	DECA
00565 	STA	TMCRTC
00566 	CMPA	#5
00567 	BCC	BLNKT1
00568 	JSR	TMLNOT
00569 	BRA	BLNKET
00570 BLNKT1	LDX	#$E2B
00571 	LDB	#10
00572 BLNKT4	CLR	128,X
00573 	CLR	96,X
00574 	CLR	64,X
00575 	CLR	32,X
00576 	CLR	,X+
00577 	DECB
00578 	BNE	BLNKT4
00579 BLNKET	LDD	#$12
00580 	STD	$5CF2
00581 	STD	$5D03
00582 	LDB	#10
00583 BLNK2	PSHS	B
00584 	JSR	$5CC8
00585 	PULS	B
00586 	DECB
00587 	BNE	BLNK2
00588 	RTS
00589 NOCRTC	LDA	BONAMT
00590 	CMPA	#9
00591 	BCC	TMPT6
00592 	LDA	#8
00593 	STA	TMCRTC
00594 TMPT6	JSR	TMLNPT
00595 BONRT1	RTS
00596 TMLNOT	LDA	#$AA
00597 	STA	BARCOL
00598 	JSR	TMLNPT
00599 	LDA	#$0
00600 	STA	BARCOL
00601 	RTS
00602 TMLNPT	LDX	#$E2B
00603 	LDA	BONAMT
00604 TMLN2	CMPA	#4
00605 	BCC	NXTMPT
00606 	LDY	#TMTBL
00607 	LDB	A,Y
00608 	ANDB	BARCOL
00609 	STB	,X+
00610 	CLR	,X
00611 	LDA	$59D5
00612 	STA	$E35
00613 	LDA	$59D6
00614 	STA	$E36
00615 	BRA	TMLN9
00616 NXTMPT	LDB	#$FF
00617 	ANDB	BARCOL
00618 	STB	,X+
00619 	SUBA	#4
00620 	BRA	TMLN2
00621 TMLN9	LDX	#$E2B
00622 	LDB	#10
00623 TMLN91	LDA	,X
00624 	STA	32,X
00625 	STA	64,X
00626 	STA	96,X
00627 	STA	128,X
00628 	LEAX	1,X
00629 	DECB
00630 	BNE	TMLN91
00631 	RTS
00632 TMTBL	FCB	0
00633 	FCB	$C0
00634 	FCB	$F0
00635 	FCB	$FC
00636 ZAPIT	LDX	#$E2B
00637 	CLR	,X
00638 	CLR	32,X
00639 	CLR	64,X
00640 	CLR	96,X
00641 	CLR	128,X
00642 	LDU	#XPOS
00643 	LDB	#8
00644 	STB	LOP1
00645 LOPLOP	JSR	$560F
00646 	LEAU	11,U
00647 	DEC	LOP1
00648 	BNE	LOPLOP
00649 	LDU	#XPOS
00650 	LDB	#8
00651 	STB	LOP1
00652 BLEPLP	TST	10,U
00653 	BEQ	NOBODY
00654 	TST	5,U
00655 	BNE	CHNGUY
00656 	LDA	NOWGUY
00657 	STA	5,U
00658 	LDB	5,U
00659 	CLRA
00660 	NEGB
00661 	ADDB	#10
00662 	LSLB
00663 	LSLB
00664 	LSLB
00665 	STD	$5CF2
00666 	STD	$5D03
00667 	LDB	#16
00668 	STB	LOP2
00669 BLPLP1	JSR	$5CC8
00670 	DEC	LOP2
00671 	BNE	BLPLP1
00672 CHNGUY	PSHS	Y,X
00673 	JSR	$55B5
00674 	PULS	X,Y
00675 NOBODY	LEAU	11,U
00676 	DEC	LOP1
00677 	BNE 	BLEPLP
00678 	LDU	#XPOS
00679 	LDY	#SHTTBL
00680 	LDB	#8
00681 	STB	LOP1
00682 LOP63	TST	10,U
00683 	BEQ	NBODY
00684 	LDX	#$5DD6
00685 	LDA	5,U
00686 	LDA	A,X
00687 	ORA	#$80
00688 	NEGA
00689 	LSRA
00690 	DECA
00691 	ADDA	,U
00692 	STA	,Y
00693 	LDA	3,U
00694 	ADDA	1,U
00695 	DECA
00696 	STA	1,Y
00697 	LDA	#1
00698 	STA	2,Y
00699 	INCA
00700 	STA	3,Y
00701 	CLR	4,Y
00702 	PSHS	Y
00703 	CLR	SHPZAP
00704 	JSR	DOSHOT
00705 	PULS	Y
00706 NBODY	LEAU	11,U
00707 	DEC	LOP1
00708 	BNE	LOP63
00709 BLOWUP	TST	BROUND
00710 	BEQ	BLOWP1
00711 	CLR	BROUND
00712 	CLR	NOWGUY
00713 	JSR	DECFX
00714 	CLR	SHOT1F
00715 	CLR	SHOT2F
00716 	JSR	ON
00717 	JSR	PUTSTR
00718 	LDX	#0
00719 	JSR	DELAY3
00720 	LDY	#SHTTBL
00721 	LDA	#40
00722 CLRSH	CLR	,Y+
00723 	DECA
00724 	BNE	CLRSH
00725 	LDY	#SCRTBL
00726 	LEAX	CNSTNT,Y
00727 	LDB	#80
00728 CLRSC8	CLR	,Y+
00729 	CLR	,X+
00730 	DECB
00731 	BNE	CLRSC8
00732 	JMP	BRONUP
00733 BLOWP1	CLRA
00734 	LDA	PLYNO
00735 	LSLA
00736 	LDX	#PLYNOT
00737 	LDX	A,X
00738 	STX	YSTOR
00739 	LEAX	8,X
00740 	DEC	,X
00741 	BCC	NODCNX
00742 	DEC	-1,X
00743 	LDA	,X
00744 	ADDA	#$0A
00745 	STA	,X
00746 NODCNX	LDX	YSTOR
00747 	LDY	#SCRTBL
00748 	LDA	PLYNO
00749 	LDB	#91
00750 	MUL
00751 	ADDB	#1
00752 READY7	TST	5,Y
00753 	BEQ	READY8
00754 	LDA	#2
00755 	STA	5,Y
00756 	LEAY	7,Y
00757 	BRA	READY7
00758 READY8	LDA	#1
00759 	STA	5,Y
00760 	STA	1,Y
00761 	STX	3,Y
00762 	LDA	#$FF
00763 	STA	6,Y
00764 	STB	,Y
00765 	LDA	#9
00766 	STA	2,Y
00767 	JSR	NUMPUT
00768 	JSR	NUMPUT
00769 	JMP	XPLODE
00770 AFTXPD	JSR	MKSTBL
00771 	LDA	PLYNO
00772 	EORA	NOPLAY
00773 	STA	PLYNO
00774 	LDX	#PLYNOT
00775 	CLRB
00776 	LSLA
00777 	LDX	A,X
00778 	LEAX	8,X
00779 	TST	,X
00780 	LBNE	AFTXP2
00781 	TST	-1,X
00782 	LBNE	AFTXP2
00783 	LDB	NOPLAY
00784 	TSTB
00785 	BEQ	GAMEND
00786 	LDA	PLYNO
00787 	EORA	#1
00788 	STA	PLYNO
00789 	LDX	#PLYNOT
00790 	CLRB
00791 	LSLA
00792 	LDX	A,X
00793 	LEAX	8,X
00794 	TST	,X
00795 	LBNE	AFTXP1
00796 	TST	-1,X
00797 	LBNE	AFTXP1
00798 GAMEND	JSR	SPFX
00799 	JSR	GMOVER
00800 	LDX	#PLY1SC
00801 	LDY	#PLY2SC
00802 	LDB	#6
00803 INSCND	LDA	,X
00804 	ADDA	#$70
00805 	STA	,X+
00806 	LDA	,Y
00807 	ADDA	#$70
00808 	STA	,Y+
00809 	DECB
00810 	BNE	INSCND
00811 HISSCK	LDX	#PLY1SC
00812 	LDU	#PLY2SC
00813 	JSR	COMPAR
00814 	LDA	#10
00815 	STA	PERMUT
00816 	LDA	PLAYER
00817 	ADDA	#$70
00818 	STA	$8B3
00819 	LDX	#$673
00820 	TFR	U,Y
00821 HISCK2	PSHS	Y
00822 	JSR	COMPAR
00823 	CMPU	,S++
00824 	BEQ	MOVBAK
00825 	DEC	PERMUT
00826 	LBEQ	TITLP2
00827 	LEAU	32,U
00828 	EXG	X,U
00829 	TFR	Y,U
00830 	BRA	HISCK2
00831 MOVBAK	DEC	PERMUT
00832 	STU	SCRPOS
00833 	PSHS	U,Y,X
00834 	JSR	INPUT
00835 	PULS	X,Y,U
00836 	LDA	PERMUT
00837 	STA	PRMUT1
00838 	PSHS	Y,X
00839 	LDX	#$78A
00840 	TSTA
00841 	BEQ	MVBAK6
00842 MVBAK1	LDB	#15
00843 MVBAK2	LDA	-32,X
00844 	STA	,X+
00845 	DECB
00846 	BNE	MVBAK2
00847 	LEAX	-47,X
00848 	DEC	PRMUT1
00849 	BNE	MVBAK1
00850 MVBAK6	LDY	#$90C
00851 	LDB	#8
00852 MVBAK3	LDA	,Y+
00853 	STA	,X+
00854 	DECB
00855 	BNE	MVBAK3
00856 	LEAX	1,X
00857 	LDB	#6
00858 	LDY	SCRPOS
00859 MVBAK4	LDA	,Y
00860 	CLR	,Y+
00861 	STA	,X+
00862 	DECB
00863 	BNE	MVBAK4
00864 	PULS	X,Y
00865 	JMP	HISSCK
00866 COMPAR	PSHS	U
00867 	PSHS	X
00868 	LDB	#6
00869 COMPR2	LDA	,X
00870 	CMPA	,U
00871 	BCS	HLBIGR
00872 	BNE	DEBIGR
00873 	LEAX	1,X
00874 	LEAU	1,U
00875 	DECB
00876 	BNE	COMPR2
00877 DEBIGR	LDA	#1
00878 	STA	PLAYER
00879 	PULS	U
00880 	PULS	X,PC
00881 HLBIGR	LDA	#2
00882 	STA	PLAYER
00883 	PULS	X
00884 	PULS	U,PC
00885 INPUT	LDA	$FF22
00886 	ANDA	#7
00887 	STA	$FF22
00888 	STA	$FFC0
00889 	STA	$FFC2
00890 	STA	$FFC4
00891 	STA	$FFC6
00892 	STA	$FFC8
00893 	STA	$FFCB
00894 	CLR	INPLCE
00895 	LDX	#$90C
00896 	STX	INPLOC
00897 	LDA	#$60
00898 	LDB	#8
00899 INPLP	STA	,X+
00900 	DECB
00901 	BNE	INPLP
00902 INPLP1	JSR	ROTATE
00903 	LDY	#$20
00904 INPLP2	PSHS	Y
00905 	JSR	[$A000]
00906 	PULS	Y
00907 	CMPA	#8
00908 	BEQ	BACKP1
00909 	CMPA	#$0D
00910 	BEQ	ENDIT6
00911 	CMPA	#$20
00912 	BCS	INPLP3
00913 	JSR	PTCHR1
00914 INPLP3	LEAY	-1,Y
00915 	BNE	INPLP2
00916 	BRA	INPLP1
00917 BACKP1	TST	INPLCE
00918 	BEQ	INPLP2
00919 	DEC	INPLCE
00920 	LDX	INPLOC
00921 	LEAX	-1,X
00922 	STX	INPLOC
00923 	LDA	#$60
00924 	STA	,X
00925 	BRA	INPLP2
00926 ENDIT6	RTS
00927 PTCHR1	LDB	INPLCE
00928 	CMPB	#8
00929 	BEQ	PTCHR2
00930 	ORA	#$40
00931 	LDX	INPLOC
00932 	STA	,X+
00933 	STX	INPLOC
00934 	INC	INPLCE
00935 PTCHR2	RTS
00936 AFTXP2	LDB	NOPLAY
00937 	TSTB
00938 	BEQ	AFTXP1
00939 	LDA	NOWGUY
00940 	LDB	NWGY1
00941 	STA	NWGY1
00942 	STB	NOWGUY
00943 	LDA	BEEPER
00944 	LDB	BEEPR1
00945 	STB	BEEPER
00946 	STA	BEEPR1
00947 	LDA	BROND1
00948 	LDB	BROND2
00949 	STB	BROND1
00950 	STA	BROND2
00951 AFTXP1	LDY	#SCRTBL
00952 	LDB	#$3A
00953 	STB	SHPOS1
00954 	STB	SHPPOS
00955 	LDU	#PLYNOT
00956 	LDX	,U
00957 	STX	3,Y
00958 	LDX	2,U
00959 	STX	10,Y
00960 	LDA	#1
00961 	STA	5,Y
00962 	STA	1,Y
00963 	STA	8,Y
00964 	STA	12,Y
00965 	STA	,Y
00966 	LDA	#9
00967 	STA	2,Y
00968 	STA	9,Y
00969 	LDA	PLYNO
00970 	LDX	#CLTBL2
00971 	LDA	A,X
00972 	STA	6,Y
00973 	EORA	#$AA
00974 	STA	13,Y
00975 	LDA	#92
00976 	STA	7,Y
00977 	JSR	NUMPUT
00978 	JSR	SPFX
00979 	JSR	PLYMS
00980 	LDY	#SHTTBL
00981 	LDA	#40
00982 CLRST1	CLR	,Y+
00983 	DECA
00984 	BNE	CLRST1
00985 	LDY	#SCRTBL
00986 	LEAX	CNSTNT,Y
00987 	LDB	#80
00988 CLRSC1	CLR	,Y+
00989 	CLR	,X+
00990 	DECB
00991 	BNE	CLRSC1
00992 	CLR	SHOT1F
00993 	CLR	SHOT2F
00994 	JMP	BONRND
00995 SPFX	DEC	SPXCNT
00996 	BNE	NXTFX
00997 	LDA	#4
00998 	STA	SPXCNT
00999 NXTFX	CLRA
01000 	LDA	SPXCNT
01001 	LSLA
01002 	LDX	#SPXTBL
01003 	LDX	A,X
01004 	JMP	,X
01005 SPXTBL	FDB	0
01006 	FDB	DECFX
01007 	FDB	SCRLFX
01008 	FDB	BARSFX
01009 	FDB	NOFX
01010 DECFX	LDX	$5D8D
01011 	LEAX	288,X
01012 	LDA	#$0A
01013 	STA	LOOPER
01014 DCNXF1	TST	,X
01015 	BEQ	DCNXFX
01016 	LSR	,X
01017 	LDB	,X
01018 	ANDB	#$0F
01019 	INCB
01020 	CLRA
01021 	STD	$5CF2
01022 	STD	$5D03
01023 	LDB	#4
01024 	STB	LINCNT
01025 DCFXSN	JSR	$5CC8
01026 	DEC	LINCNT
01027 	BNE	DCFXSN
01028 DCNXFX	LEAX	1,X
01029 	CMPX	#$1A00
01030 	BLO	DCNXF1
01031 	DEC	LOOPER
01032 	BEQ	OUTFX
01033 	LDX	$5D8D
01034 	LEAX	288,X
01035 	BRA	DCNXF1
01036 SCRLFX	LDX	$5D8D
01037 	LEAX	288,X
01038 	CLR	LOOPER
01039 SCRL1	LDA	$40,X
01040 	STA	,X+
01041 	CMPX	#$19C0
01042 	BLO	SCRL1
01043 CNTSCR	CLR	,X+
01044 	CMPX	#$1A00
01045 	BLO	CNTSCR
01046 	DEC	LOOPER
01047 	LDB	LOOPER
01048 	CMPB	#$D5
01049 	BEQ	OUTFX
01050 	CLRA
01051 	SUBB	#$D0
01052 	STD	$5CF2
01053 	STD	$5D03
01054 	LDB	#10
01055 	STB	LINCNT
01056 SCRSND	JSR	$5CC8
01057 	DEC	LINCNT
01058 	BNE	SCRSND
01059 	LDX	$5D8D
01060 	LEAX	288,X
01061 	BRA	SCRL1
01062 OUTFX	RTS
01063 BARSFX	LDX	$5D8D
01064 	LEAX	288,X
01065 MKWHT	LDA	#$FF
01066 	STA	,X+
01067 	CMPX	#$F40
01068 	BNE	MKWHT
01069 CONTBR	LDA	-32,X
01070 	CLR	-32,X
01071 	STA	,X+
01072 	CMPX	#$1A20
01073 	BHS	OUTFX
01074 	TFR	X,D
01075 	STD	STORY
01076 	ANDB	#$1F
01077 	BNE	CONTBR
01078 	LDD	STORY
01079 	RORA
01080 	RORB
01081 	RORA
01082 	RORB
01083 	RORA
01084 	RORB
01085 	RORA
01086 	RORB
01087 	RORA
01088 	RORB
01089 	ANDB	#$0F
01090 	INCB
01091 	CLRA
01092 	STD	$5CF2
01093 	STD	$5D03
01094 	LDB	#$30
01095 	STB	LINCNT
01096 BRFXSN	JSR	$5CC8
01097 	DEC	LINCNT
01098 	BNE	BRFXSN
01099 	LDY	#$480
01100 BRSFX1	LEAY	-1,Y
01101 	BNE	BRSFX1
01102 	BRA	CONTBR
01103 NOFX	LDX	#$8000
01104 NOFX1	LEAX	-1,X
01105 	BNE	NOFX1
01106 	LDX	$5D8D
01107 	LEAX	288,X
01108 NOFX2	CLR	,X+
01109 	CMPX	#$1A00
01110 	BNE	NOFX2
01111 	LDD	#$40
01112 	STD	$5CF2
01113 	STD	$5D03
01114 	LDB	#$30
01115 	STB	LOOPER
01116 NOFX3	JSR	$5CC8
01117 	DEC	LOOPER
01118 	BNE	NOFX3
01119 	LBRA	OUTFX
01120 BEEPIT	TST	BEEPER
01121 	BEQ	NOBEEP
01122 	DEC	BEEPER
01123 	BEQ	INCGUY
01124 	LDA	BEEPER
01125 	ANDA	#4
01126 	BEQ	NOBEEP
01127 	LDA	#$0C
01128 	STA	$5CF3
01129 	CLR	$5CF2
01130 	STA	$5D04
01131 	CLR	$5D03
01132 	LDB	#$14
01133 	STB	CNTLIN
01134 MKBEEP	JSR	$5CC8
01135 	DEC	CNTLIN
01136 	BNE	MKBEEP
01137 NOBEEP	TST	ALARM
01138 	BEQ	NOBEP2
01139 	LDB	ALARM1
01140 	INCB
01141 	ANDB	#1
01142 	STB	ALARM1
01143 	TSTB
01144 	BNE	NOBEP1
01145 	LDA	#$58
01146 	STA	$5CE6
01147 	LDB	#4
01148 ALLOOP	STB	,-S
01149 	LDD	#$11
01150 	STD	$5CF2
01151 	STD	$5D03
01152 	JSR	$5CC8
01153 	JSR	$5CC8
01154 	JSR	$5CC8
01155 	LDD	#$13
01156 	STD	$5CF2
01157 	STD	$5D03
01158 	JSR	$5CC8
01159 	LDB	,S+
01160 	DECB
01161 	BNE	ALLOOP
01162 	LDA	#$C0
01163 	STA	$5CE6
01164 	BRA	NOBEP1
01165 NOBEP2	CLR	ALARM1
01166 NOBEP1	RTS
01167 INCGUY	CLRA
01168 	LDA	PLYNO
01169 	LSLA
01170 	LDX	#PLYNOT
01171 	LDX	A,X
01172 	STX	YSTOR
01173 	LEAX	8,X
01174 	LDA	,X
01175 	INCA
01176 	CMPA	#$0A
01177 	BCS	IT
01178 	SUBA	#$0A
01179 	INC	-1,X
01180 IT	STA	,X
01181 	LDY	#SCRTBL
01182 SCTST1	TST	5,Y
01183 	BNE	SCTST2
01184 	LDX	YSTOR
01185 	STX	3,Y
01186 	LDA	#1
01187 	STA	1,Y
01188 	STA	5,Y
01189 	LDA	#$FF
01190 	STA	6,Y
01191 	LDA	#9
01192 	STA	2,Y
01193 	LDA	PLYNO
01194 	LDB	#91
01195 	MUL
01196 	INCB
01197 	STB	,Y
01198 	RTS
01199 SCTST2	LEAY	7,Y
01200 	BRA	SCTST1
01201 BPOINT	TST	BROUND
01202 	LBNE	BEND11
01203 	LDX	#$10AA
01204 	LDU	#$5920
01205 	LDB	#7
01206 	STB	LOOPER
01207 BPNLP1	LDB	#18
01208 	STB	CNLIN1
01209 BPNLP2	LDA	,U+
01210 	STA	,X+
01211 	DEC	CNLIN1
01212 	BNE	BPNLP2
01213 	LEAX	14,X
01214 	DEC	LOOPER
01215 	BNE	BPNLP1
01216 	LDX	#BONBUF
01217 	CLR	,X+
01218 	CLR	,X+
01219 	CLR	,X+
01220 	CLR	,X+
01221 	CLR	,X+
01222 	CLR	,X
01223 	LDA	#$FF
01224 	STA	BARCOL
01225 	INC	BONAMT
01226 BONSLP	DEC	BONAMT
01227 	LBEQ	NOMORE
01228 	JSR	TMLNPT
01229 	LDB	#6
01230 	STB	NONUM
01231 	LDX	#BONBUF
01232 	LEAX	5,X
01233 	DECB
01234 	LDU	#LEVBON
01235 	LEAU	B,U
01236 BIG12	LDA	,X
01237 	ADDA	,U
01238 	CMPA	#$0A
01239 	BCC	BIGGR1
01240 BIG11	STA	,X
01241 	LEAX	-1,X
01242 	LEAU	-1,U
01243 	DEC	NONUM
01244 	BNE	BIG12
01245 	BRA	NOMOR1
01246 BIGGR1	SUBA	#$0A
01247 	INC	-1,X
01248 	BRA	BIG11
01249 NOMOR1	CLRA
01250 	LDX	#BONBUF
01251 NOMOR3	TST	,X+
01252 	BNE	NOMOR2
01253 	INCA
01254 	BRA	NOMOR3
01255 NOMOR2	NEGA
01256 	ADDA	#6
01257 	STA	DIGITS
01258 	LDY	#SCRTBL
01259 	LDA	#1
01260 	STA	5,Y
01261 	LDA	#$FF
01262 	STA	6,Y
01263 	LDA	#23
01264 	STA	1,Y
01265 	LDA	DIGITS
01266 	STA	2,Y
01267 	SUBA	#6
01268 	NEGA
01269 	PSHS	U
01270 	LDU	#BONBUF
01271 	LEAU	A,U
01272 	STU	3,Y
01273 	PULS	U
01274 	LDB	#4
01275 	MUL
01276 	ADDB	#14
01277 	STB	,Y
01278 	JSR	NUMPUT
01279 	LDA	BONAMT
01280 	NEGA
01281 	ADDA	#$2C
01282 	TFR	A,B
01283 	CLRA
01284 	STD	$5CF2
01285 	STD	$5D03
01286 	LDB	#$11
01287 	STB	LINCNT
01288 BSNDLP	JSR	$5CC8
01289 	JSR	$5CC8
01290 	LDX	#$50
01291 BSDLP1	LEAX	-1,X
01292 	BNE	BSDLP1
01293 	DEC	LINCNT
01294 	BNE	BSNDLP
01295 	LBRA	BONSLP
01296 NOMORE	JSR	TMLNPT
01297 	LDU	#BONBUF
01298 	JSR	ADDPNT
01299 	JSR	NUMPUT
01300 	LDX	#$D000
01301 NOMOLP	LEAX	-1,X
01302 	BNE	NOMOLP
01303 BONUS1	INC	BONAMT
01304 	LDA	BONAMT
01305 	CMPA	#40
01306 	BEQ	MORENO
01307 	JSR	TMLNPT
01308 	LDB	BONAMT
01309 	LSRB
01310 	NEGB
01311 	ADDB	#$50
01312 	CLRA
01313 	STD	$5CF2
01314 	STD	$5D03
01315 	LDB	#4
01316 	STB	LINCNT
01317 BSNLP1	JSR	$5CC8
01318 	LDD	$5CF2
01319 	STD	YSTOR
01320 	LDD	#$28
01321 	STD	$5CF2
01322 	STD	$5D03
01323 	JSR	$5CC8
01324 	LDD	YSTOR
01325 	STD	$5CF2
01326 	STD	$5D03
01327 	JSR	$5CC8
01328 	DEC	LINCNT
01329 	BNE	BSNLP1
01330 	BRA	BONUS1
01331 MORENO	JSR	TMLNPT
01332 	LDX	#$8000
01333 MORNO1	LEAX	-1,X
01334 	BNE	MORNO1
01335 	LDX	#$3000
01336 NOMLP1	LEAX	-1,X
01337 	BNE	NOMLP1
01338 	LDX	#$10A0
01339 BPNLP3	CLR	,X+
01340 	CMPX	#$1180
01341 	BLO	BPNLP3
01342 	BRA	BEND13
01343 BEND11	CLR	BROUND
01344 	CLR	NOWGUY
01345 	LDX	#$1940
01346 CLRBOT	CLR	,X+
01347 	CMPX	#$1A00
01348 	BNE	CLRBOT
01349 	JSR	ON
01350 	JSR	PUTSTR
01351 	LDX	#0
01352 	JSR	DELAY3
01353 	JSR	$5206
01354 	PSHS	U
01355 	LDU	#P500
01356 	JSR	ADDPNT
01357 	PULS	U
01358 	JSR	DELAY1
01359 	JSR	DELAY1
01360 	JSR	CLS
01361 	LDX	#0
01362 	JSR	DELAY3
01363 BRONUP	LDA	BROND1
01364 	INCA
01365 	CMPA	#4
01366 	BNE	BEND12
01367 	LDA	#1
01368 BEND12	STA	BROND1
01369 BEND13	LDA	NOWGUY
01370 	INCA
01371 	CMPA	#7
01372 	BCS	NXTLV1
01373 	LDA	BROND1
01374 	STA	BROUND
01375 	LDA	#1
01376 NXTLV1	STA	NOWGUY
01377 	JMP	BONRND
01378 UPDSHT	LDA	BUTPRS
01379 	TSTA
01380 	BNE	UPD416
01381 	CLR	BUTPR1
01382 UPD416	LDA	SHOT1F
01383 	ORA	SHOT2F
01384 	LBEQ	UPDOUT
01385 	CLR	$5DBD
01386 	LDA	SHOT1X
01387 	STA	$5DBE
01388 	LDA	SHOTY
01389 	STA	$5DBF
01390 	TST	SHOT1F
01391 	BEQ	SHT1FN
01392 	JSR	$5D8F
01393 	INC	$5DBF
01394 	JSR	$5D8F
01395 	DEC	$5DBF
01396 SHT1FN	LDA	SHOT2X
01397 	STA	$5DBE
01398 	TST	SHOT2F
01399 	BEQ	SHT2FN
01400 	JSR	$5D8F
01401 	INC	$5DBF
01402 	JSR	$5D8F
01403 	DEC	$5DBF
01404 SHT2FN	LDA	SHOTY
01405 	SUBA	#3
01406 	CMPA	#6
01407 	LBEQ	STPSHT
01408 	STA	SHOTY
01409 	STA	$5DBF
01410 	LDA	#$FF
01411 	STA	$5DBD
01412 	LDA	SHOT1X
01413 	STA	$5DBE
01414 	TST	SHOT1F
01415 	BEQ	SHT1FO
01416 	JSR	$5D8F
01417 	INC	$5DBF
01418 	JSR	$5D8F
01419 	DEC	$5DBF
01420 SHT1FO	LDA	SHOT2X
01421 	STA	$5DBE
01422 	TST	SHOT2F
01423 	BEQ	SHT2FO
01424 	JSR	$5D8F
01425 	INC	$5DBF
01426 	JSR	$5D8F
01427 	DEC	$5DBF
01428 SHT2FO	LDA	#$FE
01429 	STA	$FF02
01430 	LDA	$FF00
01431 	BITA	#4
01432 JOYN5	EQU	.-1
01433 	BNE	STPT11
01434 POS1	LDA	#$FE
01435 	STA	$FF02
01436 	LDA	$FF00
01437 	ANDA	#$40
01438 	BNE	POS1
01439 STPT11	RTS
01440 UPDOUT	LDA	#$FD
01441 	STA	$FF02
01442 	LDA	$FF00
01443 	ANDA	#$7F
01444 	CMPA	#$3F
01445 	BNE	STOPIT
01446 	LDA	#$FB
01447 	STA	$FF02
01448 	LDA	$FF00
01449 	ANDA	#$7F
01450 	CMPA	#$3F
01451 	BNE	STOPIT
01452 	JMP	TITLP2
01453 STOPIT	LDA	#$FE
01454 	STA	$FF02
01455 	LDA	$FF00
01456 	BITA	#4
01457 JOYN4	EQU	.-1
01458 	BNE	STPIT1
01459 PAUSE	LDA	#$FE
01460 	STA	$FF02
01461 	LDA	$FF00
01462 	ANDA	#$40
01463 	BNE	PAUSE
01464 STPIT1	LDA	BUTPRS
01465 	LDB	BUTPR1
01466 	TSTB
01467 	BEQ	SHTABL
01468 	STA	BUTPR1
01469 	RTS
01470 SHTABL	TSTA
01471 	BEQ	SHT2FO
01472 	STA	BUTPR1
01473 	LDA	#1
01474 	STA	SHOT1F
01475 	STA	SHOT2F
01476 	LDA	SHPPOS
01477 	ADDA	#2
01478 	STA	SHOT1X
01479 	ADDA	#8
01480 	STA	SHOT2X
01481 	LDA	#$5A
01482 	STA	SHOTY
01483 	LDX	#$30
01484 	STX	$5CF2
01485 	STX	$5D03
01486 	LDB	#18
01487 	STB	LINCNT
01488 LOOPSN	LDX	$5CF2
01489 	LEAX	-2,X
01490 	STX	$5CF2
01491 	STX	$5D03
01492 	JSR	$5CC8
01493 	JSR	$5CC8
01494 	DEC	LINCNT
01495 	BNE	LOOPSN
01496 	LDA	SHOTY
01497 	LBRA	SHT2FN
01498 STPSHT	CLR	SHOT1F
01499 	CLR	SHOT2F
01500 	LBRA	UPDOUT
01501 DOSHOT	LDY	#SHTTBL
01502 	LDB	#8
01503 	STB	CNLIN1
01504 	CLR	SHTTHR
01505 SHTLP	STY	STORY
01506 	TST	2,Y
01507 	BEQ	NSHT
01508 	INC	SHTTHR
01509 	LDA	3,Y
01510 	CMPA	#1
01511 	LBCS	PELLET
01512 	LBEQ	STRING
01513 	LBCC	CYCZAP
01514 NSHT	LDY	STORY
01515 	LEAY	5,Y
01516 	DEC	CNLIN1
01517 	BNE	SHTLP
01518 	RTS
01519 CYCZAP	LDA	,Y
01520 	LDB	1,Y
01521 	STA	$5BCB
01522 	CLR	$5BCC
01523 	STB	$5BCD
01524 	CLR	$5BCE
01525 	LDA	SHPPOS
01526 	ADDA	#6
01527 	STA	$5BC9
01528 	CLR	$5BCA
01529 	LDA	#$FF
01530 	STA	$5BD5
01531 	LDA	#$58
01532 	STA	$5BC7
01533 	CLR	$5BC8
01534 	PSHS	Y,X
01535 	LDX	$5BC9
01536 	LDY	$5BCB
01537 	STX	STXEND
01538 	STY	STXST
01539 	LDX	$5BC7
01540 	STX	STYEND
01541 	LDX	$5BCD
01542 	STX	STYST
01543 	JSR	$5AA6
01544 	JSR	REVERS
01545 	LDX	#15
01546 DELOOP	LEAX	-1,X
01547 	BNE	DELOOP
01548 	JSR	REVERS
01549 	CLR	$5BD5
01550 	LDX	STYST
01551 	STX	$5BCD
01552 	LDX	STXEND
01553 	LDY	STXST
01554 	STX	$5BC9
01555 	STY	$5BCB
01556 	LDX	STYEND
01557 	STX	$5BC7
01558 	JSR	$5AA6
01559 	PULS	X,Y
01560 	LDA	SHPZAP
01561 	INCA
01562 	STA	SHPZAP
01563 	CMPA	#5
01564 	LBCC	BLOWUP
01565 PDEADP	CLR	2,Y
01566 	LBRA	NSHT
01567 PELLET	LDA	LEVEL
01568 	CMPA	#$8
01569 	BCC	PELET1
01570 	TST	CYCLE
01571 	BNE	PELET1
01572 	LBRA	NSHT
01573 PELET1	LDA	,Y
01574 	STA	$5DBE
01575 	LDA	1,Y
01576 	STA	$5DBF
01577 	CLR	$5DBD
01578 	JSR	$5D8F
01579 	INC	$5DBF
01580 	JSR	$5D8F
01581 	LDA	1,Y
01582 	ADDA	#2
01583 	CMPA	#$60
01584 	BCC	PDEADP
01585 	STA	1,Y
01586 	STA	$5DBF
01587 	LDA	,Y
01588 	ADDA	4,Y
01589 	CMPA	#$80
01590 	BCC	PDEADP
01591 	STA	,Y
01592 	STA	$5DBE
01593 	LDA	#$AA
01594 	STA	$5DBD
01595 	JSR	$5D8F
01596 	INC	$5DBF
01597 	JSR	$5D8F
01598 	LBRA	NSHT
01599 STRING	LDA	4,Y
01600 	CMPA	#$60
01601 	BCC	STRNG1
01602 	ADDA	#2
01603 	STA	4,Y
01604 	SUBA	1,Y
01605 	CMPA	#20
01606 	BCS	STRNG2
01607 	INC	1,Y
01608 	INC	1,Y
01609 	BRA	STRNG2
01610 STRNG1	LDA	1,Y
01611 	ADDA	#2
01612 	CMPA	#$60
01613 	LBCC	PDEDP1
01614 	STA	1,Y
01615 STRNG2	LDA	#2
01616 	STA	CNTLIN
01617 	LDA	1,Y
01618 	SUBA	#2
01619 	LDB	#32
01620 	LDX	SCRST
01621 	MUL
01622 	LEAX	D,X
01623 	LDA	,Y
01624 	TFR	A,B
01625 	ANDA	#$3
01626 	LSRB
01627 	LSRB
01628 	LEAX	B,X
01629 	PSHS	Y
01630 	LDY	#TBSTVL
01631 	LEAY	A,Y
01632 	LDA	,Y
01633 	LSR	,Y
01634 	ORA	,Y
01635 	LSL	,Y
01636 	COMA
01637 ANDLP	LDB	,X
01638 	STA	,-S
01639 	ANDB	,S+
01640 	STB	,X
01641 	LEAX	32,X
01642 	DEC	CNTLIN
01643 	BNE	ANDLP
01644 	LEAX	-32,X
01645 	LDA	,Y
01646 	PULS	Y
01647 	LDB	4,Y
01648 	SUBB	1,Y
01649 	INCB
01650 STRLP	LEAX	32,X
01651 	STA	,-S
01652 	ORA	,X
01653 	STA	,X
01654 	LDA	,S+
01655 	CMPB	#20
01656 	BEQ	SND
01657 	BRA	NOSND
01658 SND	PSHS	X,B,A
01659 	CLRA
01660 	LDB	1,Y
01661 	LSRB
01662 	LSRB
01663 	LSRB
01664 	STD	$5CF2
01665 	STD	$5D03
01666 	JSR	$5CC8
01667 	JSR	$5CC8
01668 	JSR	$5CC8
01669 	JSR	$5CC8
01670 	PULS	A,B,X
01671 NOSND	DECB
01672 	CMPB	#1
01673 	BEQ	SND
01674 	TSTB
01675 	BNE	STRLP
01676 	LBRA	NSHT
01677 PDEDP1	LDA	,Y
01678 	STA	$5DBE
01679 	LDA	#$5F
01680 	STA	$5DBF
01681 	CLR	$5DBD
01682 	JSR	$5D8F
01683 	DEC	$5DBF
01684 	JSR	$5D8F
01685 	DEC	$5DBF
01686 	JSR	$5D8F
01687 	LBRA	PDEADP
01688 NUMPUT	CLR	SCROFF
01689 	LDY	#SCRTBL
01690 	LDB	#10
01691 	STB	NONUM
01692 NUMNXT	TST	5,Y
01693 	BEQ	NEXTNM
01694 	INC	SCROFF
01695 	LDX	$5D8D
01696 	LDA	1,Y
01697 	LDB	#32
01698 	MUL
01699 	LEAX	D,X
01700 	LDB	,Y
01701 	TFR	B,A
01702 	LSRB
01703 	LSRB
01704 	ABX
01705 	LDB	2,Y
01706 	STB	NOFNUM
01707 	ANDA	#1
01708 	STA	SHFTBT
01709 	LDU	3,Y
01710 	PSHS	Y
01711 NXNMLP	CLRA
01712 	LDA	,U+
01713 	LSLA
01714 	LDY	#$5568
01715 	LDY	A,Y
01716 	LDB	#5
01717 	STB	BTINUM
01718 NUMLOP	LDA	,Y+
01719 	TST	SHFTBT
01720 	BEQ	NOSHBT
01721 	LSRA
01722 	LSRA
01723 NOSHBT	STY	YSTOR
01724 	PULS	Y
01725 	ANDA	6,Y
01726 	PSHS	Y
01727 	LDY	YSTOR
01728 	STA	,X
01729 	LEAX	32,X
01730 	DEC	BTINUM
01731 	BNE	NUMLOP
01732 	LEAX	-159,X
01733 	DEC	NOFNUM
01734 	BNE	NXNMLP
01735 	PULS	Y
01736 	DEC	5,Y
01737 	LDA	5,Y
01738 	CMPA	#1
01739 	BNE	NEXTNM
01740 	LDU	#EMPBUF
01741 	STU	3,Y
01742 NEXTNM	DEC	NONUM
01743 	BEQ	OUTNUM
01744 	LEAY	7,Y
01745 	LBRA	NUMNXT
01746 OUTNUM	RTS
01747 SPORMV	TST	10,U
01748 	BNE	SPRMV1
01749 	LDX	#100
01750 DELOP	LEAX	-1,X
01751 	BNE	DELOP
01752 	RTS
01753 SPRMV1	LDA	5,U
01754 	CMPA	#8
01755 	BNE	SPRMV2
01756 	LDB	#$0A
01757 	STB	LINCNT
01758 XPSOND	JSR	$5D21
01759 	LDB	$5D3F
01760 	ANDB	#$3F
01761 	ADDB	#5
01762 	CLRA
01763 	STD	$5CF2
01764 	LDB	$5D40
01765 	ANDB	#$3F
01766 	ADDB	#5
01767 	STD	$5D03
01768 	JSR	$5CC8
01769 	DEC	LINCNT
01770 	BNE	XPSOND
01771 	LBRA	SPRANM
01772 SPRMV2	LDA	5,U
01773 	TSTA
01774 	LBEQ	SPRMV3
01775 	CMPA	#5
01776 	LBEQ	STRSHT
01777 	CMPA	#6
01778 	LBEQ	PSYMOV
01779 	BCC	BRDMOV
01780 	BITA	#1
01781 	BNE	RNDMOV
01782 NORMOV	JSR	UPDOWN
01783 	LDA	5,U
01784 	CMPA	#4
01785 	BNE	NORMY1
01786 	LDB	10,U
01787 	ANDB	#$1E
01788 	CMPB	#$1E
01789 	BNE	NOROUT
01790 NORMY1	LDX	#$5DD6
01791 	LDA	A,X
01792 	ORA	#$80
01793 	COMA
01794 	LSRA
01795 	ADDA	,U
01796 	STA	,-S
01797 	LDA	SHPPOS
01798 	ADDA	#6
01799 	CMPA	,S+
01800 	BEQ	NOROUT
01801 	BCS	LEFTMV
01802 	JSR	INCX
01803 	BRA	NOROUT
01804 LEFTMV	JSR	DECX
01805 NOROUT	LBRA	PELSHT
01806 RNDMOV	JSR	UPDOWN
01807 	TST	10,U
01808 	BNE	RNMV1
01809 	RTS
01810 RNMV1	LDA	10,U
01811 	TFR	A,B
01812 	ANDA	#$E1
01813 	ANDB	#$1E
01814 	BNE	NONURN
01815 	ANDA	#$81
01816 	STA	10,U
01817 	LDA	$5D3F
01818 	ANDA	#$60
01819 	ORA	10,U
01820 	LDB	$5D3F
01821 	ANDB	#$0E
01822 	ORB	#2
01823 	CMPB	#9
01824 	BCS	NONURN
01825 	SUBB	#8
01826 NONURN	SUBB	#2
01827 	STA	10,U
01828 	ORB	10,U
01829 	STB	10,U
01830 	BITA	#$40
01831 	BEQ	TRYRT
01832 	JSR	DECX
01833 TRYRT	BITA	#$20
01834 	BEQ	RNDOUT
01835 	JSR	INCX
01836 RNDOUT	LBRA	PELSHT
01837 BRDMOV	LDA	10,U
01838 	BITA	#$40
01839 	BEQ	TRYRT1
01840 	JSR	DECX
01841 	LDA	,U
01842 	DECA
01843 	BNE	BRDOUT
01844 	CLR	10,U
01845 	DEC	CNTDED
01846 	BRA	BRDOUT
01847 TRYRT1	JSR	INCX
01848 	LDA	,U
01849 	LDB	5,U
01850 	LDX	#$5DD6
01851 	LDB	B,X
01852 	DECB
01853 	STB	,-S
01854 	CMPA	,S+
01855 	BLO	BRDOUT
01856 	CLR	10,U
01857 	DEC	CNTDED
01858 BRDOUT	LBRA	SPRANM
01859 PSYMOV	JSR	UPDOWN
01860 	LDA	10,U
01861 	BITA	#$40
01862 	BEQ	TRYRT2
01863 	JSR	DECX
01864 	BRA	PSYOUT
01865 TRYRT2	JSR	INCX
01866 PSYOUT	LDA	3,U
01867 	ADDA	1,U
01868 	LDB	5,U
01869 	PSHS	X
01870 	LDX	#$5DD6
01871 	LDB	B,X
01872 	PULS	X
01873 	ORB	#$80
01874 	NEGB
01875 	LSRB
01876 	DECB
01877 	ADDB	,U
01878 	LDY	#SHTTBL
01879 NEXSH1	TST	2,Y
01880 	BNE	NEXTSH
01881 	STA	1,Y
01882 	STB	,Y
01883 	LDA	#2
01884 	STA	3,Y
01885 	LDA	SHPPOS
01886 	ADDA	#6
01887 	SUBA	,Y
01888 	BCC	NNEGA
01889 	NEGA
01890 NNEGA	LDB	#$58
01891 	SUBB	1,Y
01892 	STB	,-S
01893 	ADDA	,S+
01894 	CMPA	#45
01895 	BCC	NOZAP
01896 	LDA	#1
01897 	STA	ALARM
01898 	JSR	$5D21
01899 	LDA	$5D3F
01900 	ANDA	CYCPRB
01901 	BNE	NOZAP
01902 	LDA	#1
01903 	STA	2,Y
01904 	BRA	NOZAP
01905 NEXTSH	LEAY	5,Y
01906 	BRA	NEXSH1
01907 NOZAP	LBRA	SPRANM
01908 STRSHT	LDA	10,U
01909 	ANDA	#$1E
01910 	BEQ	STRSH1
01911 	SUBA	#2
01912 	ORA	#1
01913 	STA	10,U
01914 	LBRA	SPRANM
01915 STRSH1	JSR	$5D21
01916 	LDA	$5D3F
01917 	ANDA	ARMPRB
01918 	BNE	NOSTR
01919 	LDA	STRNO
01920 	STA	SHCON
01921 	LDA	3,U
01922 	ADDA	1,U
01923 	LDB	5,U
01924 	PSHS	X
01925 	LDX	#$5DD6
01926 	LDB	B,X
01927 	PULS	X
01928 	ORB	#$80
01929 	NEGB
01930 	LSRB
01931 	DECB
01932 	ADDB	,U
01933 	LDY	#SHTTBL
01934 NXSH1	TST	2,Y
01935 	BNE	NXTSH
01936 	STA	1,Y
01937 	STA	4,Y
01938 	STB	,Y
01939 	LDA	#1
01940 	STA	3,Y
01941 	STA	2,Y
01942 	LDA	#13
01943 	STA	10,U
01944 	LBRA	SPRANM
01945 NXTSH	LEAY	5,Y
01946 	DEC	SHCON
01947 	BNE	NXSH1
01948 NOSTR	LBRA	SPRMV3
01949 PELSHT	JSR	$5D21
01950 	LDA	$5D3F
01951 	PSHS	X
01952 	LDX	#FLGPRB
01953 	LDB	5,U
01954 	DECB
01955 	ANDA	B,X
01956 	BNE	NOPEL1
01957 	LDX	#FLGNO
01958 	LDA	B,X
01959 	PULS	X
01960 	STA	SHCON
01961 	LDA	3,U
01962 	ADDA	1,U
01963 	LDB	5,U
01964 	PSHS	X
01965 	LDX	#$5DD6
01966 	LDB	B,X
01967 	PULS	X
01968 	ORB	#$80
01969 	NEGB
01970 	LSRB
01971 	DECB
01972 	ADDB	,U
01973 	LDY	#SHTTBL
01974 NXSH11	TST	2,Y
01975 	BNE	NXTSH1
01976 	STA	1,Y
01977 	STB	,Y
01978 	CLR	3,Y
01979 	LDA	#1
01980 	STA	2,Y
01981 NXRND	JSR	$5D21
01982 	LDA	$5D3F
01983 	ANDA	#3
01984 	BEQ	NXRND
01985 	SUBA	#2
01986 	STA	4,Y
01987 	BRA	NOPEL
01988 NXTSH1	LEAY	5,Y
01989 	DEC	SHCON
01990 	BNE	NXSH11
01991 	BRA	NOPEL
01992 NOPEL1	PULS	X
01993 NOPEL	LBRA	SPRANM
01994 UPDOWN	LDA	10,U
01995 	BITA	#$80
01996 	BNE	UP
01997 DOWN	JSR	INCY
01998 	LDA	10,U
01999 	BITA	#$80
02000 	BNE	TRUBBL
02001 	RTS
02002 TRUBBL	LDA	5,U
02003 	CMPA	#4
02004 	BEQ	TRUBL1
02005 	RTS
02006 TRUBL1	LDA	10,U
02007 	SUBA	#2
02008 	ANDA	#$7F
02009 	STA	10,U
02010 	BITA	#$1E
02011 	BEQ	TRUBL2
02012 	RTS
02013 TRUBL2	ORA	#$9E
02014 	STA	10,U
02015 	RTS
02016 UP	JSR	DECY
02017 	LDA	5,U
02018 	CMPA	#6
02019 	BEQ	NOWORY
02020 	LDA	1,U
02021 	CMPA	#$30
02022 	BCC	NOWORY
02023 	LDA	10,U
02024 	ANDA	#$7F
02025 	STA	10,U
02026 NOWORY	RTS
02027 SPRMV3	LDX	6,U
02028 	LDA	,X
02029 	CMPA	#10
02030 	BHS	SUBIT
02031 	LEAX	1,X
02032 	STX	6,U
02033 	BRA	DONE
02034 SUBIT	LDB	,X
02035 	NEGB
02036 	STB	ADDER
02037 	FDB	$3088
02038 ADDER	FCB	$0
02039 	STX	6,U
02040 	BRA	SPRMV3
02041 DONE	CMPA	#9
02042 	BEQ	OUTOHR
02043 	PSHS	A
02044 	CMPA	#7
02045 	BEQ	CLDECY
02046 	CMPA	#2
02047 	BCS	CLDECY
02048 	BEQ	CMPXBT
02049 	CMPA	#6
02050 	BNE	CLINCY
02051 CMPXBT	PULS	A
02052 	TSTA
02053 	BEQ	OUTOHR
02054 	CMPA	#4
02055 	BEQ	OUTOHR
02056 	BCS	CLINCX
02057 CLDECX	BSR	DECX
02058 	BRA	OUTOHR
02059 CLINCY	BSR	INCY
02060 	BRA	CMPXBT
02061 CLDECY	BSR	DECY
02062 	BRA	CMPXBT
02063 CLINCX	BSR	INCX
02064 OUTOHR	LBRA	SPRANM
02065 DECX	DEC	,U
02066 	BNE	DEKXOT
02067 	INC	,U
02068 	LDA	10,U
02069 	EORA	#$60
02070 	STA	10,U
02071 DEKXOT	RTS
02072 DECY	DEC	1,U
02073 	DEC	1,U
02074 	LDA	1,U
02075 	CMPA	#9
02076 	BCC	NDECY
02077 	LDA	#9
02078 	STA	1,U
02079 	LDA	10,U
02080 	ANDA	#$7F
02081 	STA	10,U
02082 NDECY	RTS
02083 INCY	LDA	#$5F
02084 	LDB	5,U
02085 	PSHS	X
02086 	LDX	#$5DCD
02087 	SUBA	B,X
02088 	PULS	X
02089 	STA	SRBYTE
02090 	LDB	1,U
02091 	INCB
02092 	INCB
02093 	CMPB	SRBYTE
02094 	BLO	NINCY
02095 	LDB	SRBYTE
02096 	LDA	10,U
02097 	ORA	#$80
02098 	STA	10,U
02099 	LDA	BROUND
02100 	CMPA	#1
02101 	BNE	NINCY
02102 	LDA	,U
02103 	INCA
02104 	CLR	10,U
02105 	PSHS	U,B
02106 	LDU	#TABX
02107 NXTX9	TST	,U+
02108 	BNE	NXTX9
02109 	STA	-1,U
02110 	DEC	CNTDED
02111 	PULS	B,U
02112 NINCY	STB	1,U
02113 	RTS
02114 INCX	STX	,--S
02115 	LDX	#$5DD6
02116 	LDA	5,U
02117 	LDA	A,X
02118 	LDX	,S++
02119 	STA	,-S
02120 	LDB	,U
02121 	INCB
02122 	CMPB	,S+
02123 	BLS	NINCX
02124 	LEAS	-1,S
02125 	LDB	,S+
02126 	LDA	10,U
02127 	EORA	#$60
02128 	STA	10,U
02129 NINCX	STB	,U
02130 	RTS
02131 SPRANM	TST	10,U
02132 	BNE	SPRAN1
02133 	RTS
02134 SPRAN1	LDX	8,U
02135 	LDA	,X
02136 	CMPA	#10
02137 	BHS	SUBIT1
02138 	LEAX	1,X
02139 	STX	8,U
02140 	BRA	DONE1
02141 SUBIT1	LDB	,X
02142 	CMPB	#$FB
02143 	BNE	SUBIT2
02144 	CLR	10,U
02145 	DEC	CNTDED
02146 	RTS
02147 SUBIT2	STB	ADDER1
02148 	FDB	$3088
02149 ADDER1	FCB	0
02150 	STX	8,U
02151 	BRA	SPRANM
02152 DONE1	STA	4,U
02153 	LDA	BROUND
02154 	CMPA	#3
02155 	BNE	SPORM2
02156 	TST	CYCLE1
02157 	BNE	SPORM1
02158 SPORM2	JSR	$55B5
02159 SPORM1	RTS
02160 HITCHK	LDA	10,U
02161 	ORA	#1
02162 	STA	10,U
02163 	LDB	5,U
02164 	CMPB	#8
02165 	BEQ	RET
02166 	LDB	1,U
02167 	ADDB	3,U
02168 	CMPB	SHOTY
02169 	BLO	RET
02170 	LDB	SHOTY
02171 	ADDB	#3
02172 	CMPB	1,U
02173 	BLO	RET
02174 	CMPA	#8
02175 	BEQ	RET
02176 	TST	SHOT1F
02177 	BEQ	TESTS2
02178 	LDA	SHOT1X
02179 	LDB	5,U
02180 	LDX	#$5DD6
02181 	LDB	B,X
02182 	ORB	#$80
02183 	COMB
02184 CHK11	CMPA	,U
02185 	BEQ	HIT1
02186 CHK12	DECA
02187 	DECB
02188 	BNE	CHK11
02189 TESTS2	TST	SHOT2F
02190 	BEQ	RET
02191 	LDA	SHOT2X
02192 	LDB	5,U
02193 	LDX	#$5DD6
02194 	LDB	B,X
02195 	ORB	#$80
02196 	COMB
02197 CHK21	CMPA	,U
02198 	BEQ	HIT2
02199 CHK22	DECA
02200 	DECB
02201 	BNE	CHK21
02202 RET	RTS
02203 HIT1	CLR	ERR
02204 	JSR	HIT11
02205 	TST	ERR
02206 	BNE	CHK12
02207 	CLR	SHOT1F
02208 	LDA	SHOT1X
02209 	BRA	HIT
02210 HIT2	CLR	ERR
02211 	JSR	HIT11
02212 	TST	ERR
02213 	BNE	CHK22
02214 	CLR	SHOT2F
02215 	LDA	SHOT2X
02216 HIT	STA	$5DBE
02217 	CLR	$5DBD
02218 	LDA	SHOTY
02219 	STA	$5DBF
02220 	JSR	$5D8F
02221 	INC	$5DBF
02222 	JSR	$5D8F
02223 	DEC	$5DBF
02224 	PSHS	Y,X,B,A
02225 	JSR	$560F
02226 	PULS	A,B,X,Y
02227 	CLR	4,U
02228 	PSHS	Y,X,B,A
02229 	LDA	5,U
02230 	CMPA	#7
02231 	LBNE	NOTBRD
02232 	LDA	BROUND
02233 	CMPA	#1
02234 	BNE	BRD69
02235 	LDY	#SCRTBL
02236 NNM1	TST	5,Y
02237 	BNE	NNM
02238 	PSHS	U,X
02239 	LDA	#30
02240 	STA	5,Y
02241 	LDU	#BBBUFF
02242 	LEAX	2,U
02243 	JSR	ADDPNT
02244 	STX	3,Y
02245 	PULS	X,U
02246 	LDA	,U
02247 	STA	,Y
02248 	LDA	1,U
02249 	STA	1,Y
02250 	LDA	#4
02251 	STA	2,Y
02252 	LDA	#$AA
02253 	STA	6,Y
02254 	BRA	NOTBRD
02255 NNM	LEAY	7,Y
02256 	BRA	NNM1
02257 BRD69	JSR	$5D21
02258 	LDB	$5D40
02259 	ANDB	#7
02260 	INCB
02261 	LDA	#10
02262 	STA	NONUM
02263 	LDY	#SCRTBL
02264 TRNNM1	TST	5,Y
02265 	BNE	TRYNNM
02266 	PSHS	X
02267 	LEAX	CNSTNT,Y
02268 	PSHS	X
02269 	STB	,X+
02270 	CLR	,X+
02271 	CLR	,X
02272 	PULS	X
02273 	LDA	#30
02274 	STA	5,Y
02275 	PSHS	U
02276 	LEAU	-3,X
02277 	PSHS	U
02278 	CLR	,U+
02279 	CLR	,U+
02280 	CLR	,U
02281 	PULS	U
02282 	JSR	ADDPNT
02283 	PULS	U
02284 	STX	3,Y
02285 	PULS	X
02286 	STB	RNDNUM
02287 	LDA	,U
02288 	STA	,Y
02289 	LDA	1,U
02290 	STA	1,Y
02291 	LDA	#3
02292 	STA	2,Y
02293 	LDA	#$0AA
02294 	STA	6,Y
02295 	BRA	NOTBRD
02296 TRYNNM	LEAY	7,Y
02297 	DEC	NONUM
02298 	BRA	TRNNM1
02299 NOTBRD	PULS	A,B,X,Y
02300 	LDA	5,U
02301 	CMPA	#7
02302 	BEQ	NTBRD1
02303 	LDB	#6
02304 	MUL
02305 	PSHS	U
02306 	LDU	#$553E
02307 	LEAU	D,U
02308 	JSR	ADDPNT
02309 	PULS	U
02310 NTBRD1	TST	5,U
02311 	BEQ	PODHIT
02312 	LDB	#6
02313 	SUBB	3,U
02314 	BCS	MVYXPL
02315 	LSRB
02316 	BEQ	NOMVY1
02317 	STB	LINCNT
02318 NXY21	JSR	DECY
02319 	DEC	LINCNT
02320 	BNE	NXY21
02321 	BRA	NOMVY1
02322 MVYXPL	NEGB
02323 	LSRB
02324 	BEQ	NOMVY1
02325 	STB	LINCNT
02326 NXY22	JSR	INCY
02327 	DEC	LINCNT
02328 	BNE	NXY22
02329 NOMVY1	LDB	#8
02330 	STB	5,U
02331 	LDX	#$5DD6
02332 	LDB	B,X
02333 	ORB	#$80
02334 	INCB
02335 	ADDB	#7
02336 	LSRB
02337 	INCB
02338 DECLP1	JSR	DECX
02339 	DECB
02340 	BNE	DECLP1
02341 	JSR	INCX
02342 FINSUP	CLRA
02343 	LDA	5,U
02344 	LSLA
02345 	LDX	#$5DDF
02346 	LDX	A,X
02347 	STX	8,U
02348 	RTS
02349 PODHIT	LDA	BROUND
02350 	CMPA	#1
02351 	BNE	PDHT1
02352 	LDA	HTPOD
02353 	INCA
02354 	STA	HTPOD
02355 	CMPA	#8
02356 	BEQ	BIRDY
02357 	BRA	HTPOD1
02358 PDHT1	LDA	$5D40
02359 	ANDA	#$7
02360 	TSTA
02361 	BEQ	BIRDY
02362 HTPOD1	LDA	NOWGUY
02363 	BRA	BRDE1
02364 BIRDY	LDA	#7
02365 BRDE1	STA	5,U
02366 	PSHS	X
02367 	LDX	#$5DCD
02368 	LDA	A,X
02369 	STA	3,U
02370 	LDB	#6
02371 	PULS	X
02372 	SUBB	3,U
02373 	BCS	MVYHUH
02374 	LSRB
02375 	BEQ	NOMVY
02376 	STB	LINCNT
02377 NXY11	JSR	INCY
02378 	DEC	LINCNT
02379 	BNE	NXY11
02380 	BRA	NOMVY
02381 MVYHUH	NEGB
02382 	LSRB
02383 	BEQ	NOMVY
02384 	STB	LINCNT
02385 NXY12	JSR	DECY
02386 	DEC	LINCNT
02387 	BNE	NXY12
02388 NOMVY	LDA	5,U
02389 	TFR	A,B
02390 	CLRA
02391 	NEGB
02392 	ADDB	#10
02393 	LSLB
02394 	LSLB
02395 	LSLB
02396 	STD	$5CF2
02397 	STD	$5D03
02398 	LDB	#16
02399 	STB	LINCNT
02400 BEEPLP	JSR	$5CC8
02401 	DEC	LINCNT
02402 	BNE	BEEPLP
02403 	LDA	5,U
02404 	LDX	#$5DD6
02405 	LDA	A,X
02406 	ORA	#$80
02407 	INCA
02408 	ADDA	#7
02409 	LSRA
02410 	INCA
02411 DECLP2	STA	,-S
02412 	JSR	INCX
02413 	LDA	,S+
02414 	DECA
02415 	BNE	DECLP2
02416 	JSR	DECX
02417 	CLRA
02418 	LDA	5,U
02419 	LDX	#JMPTBL
02420 	LSLA
02421 	LDX	A,X
02422 	JMP	,X
02423 JMPTBL	FDB	FINSUP
02424 	FDB	FLGBYT
02425 	FDB	CRSBYT
02426 	FDB	FLGBYT
02427 	FDB	STMBYT
02428 	FDB	ARMBYT
02429 	FDB	PSYBYT
02430 	FDB	BRDBYT
02431 CRSBYT	LDA	#1
02432 	STA	10,U
02433 	LBRA	FINSUP
02434 STMBYT	LDA	#$1F
02435 	STA	10,U
02436 	LBRA	FINSUP
02437 ARMBYT	LDA	#1
02438 	STA	10,U
02439 	LDY	#$5C8A
02440 	STY	6,U
02441 	LBRA	FINSUP
02442 PSYBYT	JSR	$5D21
02443 	LDA	$5D3F
02444 	LDB	#$20
02445 	BITA	#1
02446 	BNE	NOSHF
02447 	LSLB
02448 NOSHF	ANDA	#$80
02449 	ORA	#1
02450 	STA	,-S
02451 	ORB	,S+
02452 	STB	10,U
02453 	LBRA	FINSUP
02454 BRDBYT	JSR	$5D21
02455 	LDA	$5D3F
02456 	LDB	#$20
02457 	BITA	#1
02458 	BNE	NOSHF1
02459 	LSLB
02460 NOSHF1	ORB	#1
02461 	STB	10,U
02462 	LBRA	FINSUP
02463 FLGBYT	JSR	$5D21
02464 	LDA	$5D3F
02465 	ANDA	#$1F
02466 	CMPA	#2
02467 	BCS	FLGBYT
02468 	CMPA	#10
02469 	BCC	FLGBYT
02470 	LDB	#$20
02471 	BITA	#1
02472 	BNE	NOSHF2
02473 	LSLB
02474 NOSHF2	ORA	#1
02475 	STA	,-S
02476 	ORB	,S+
02477 	STB	10,U
02478 	LBRA	FINSUP
02479 HIT11	PSHS	B,A
02480 	LDA	5,U
02481 	CMPA	#3
02482 	BNE	OUT11
02483 	LDA	4,U
02484 	CMPB	#7
02485 	BEQ	MSTLKY
02486 	CMPB	#1
02487 	BEQ	MSTLKY
02488 	CMPB	#6
02489 	BEQ	LKY2
02490 	CMPB	#2
02491 	BEQ	LKY2
02492 	CMPB	#5
02493 	BEQ	LKY3
02494 	CMPB	#3
02495 	BEQ	LKY3
02496 	BRA	OUT11
02497 LKY3	CMPA	#1
02498 	BEQ	OUT11
02499 	CMPA	#4
02500 	BEQ	OUT11
02501 LKY2	CMPA	#2
02502 	BEQ	OUT11
02503 	CMPA	#5
02504 	BEQ	OUT11
02505 MSTLKY	CMPA	#3
02506 	BEQ	OUT11
02507 	CMPA	#6
02508 	BEQ	OUT11
02509 OUT12	LDA	#1
02510 	STA	ERR
02511 OUT11	PULS	A,B,PC
02512 MOVSHP	PSHS	Y,X,B,A
02513 	LDA	SHPPOS
02514 	STA	SHPOS1
02515 	JSR	CHEQ
02516 	JSR	DAVID
02517 	JSR	JOYIN
02518 	LDA	DIR
02519 	TSTA
02520 	BEQ	STOP
02521 	CMPA	#2
02522 	BEQ	RIGHT
02523 LEFT	LDB	SHPPOS
02524 	DECB
02525 	BEQ	STOP
02526 	STB	SHPPOS
02527 	JSR	OFF
02528 	BRA	STOP
02529 RIGHT	LDB	SHPPOS
02530 	INCB
02531 	CMPB	#115
02532 	BEQ	STOP
02533 	STB	SHPPOS
02534 	JSR	OFF
02535 STOP	JSR	ON
02536 	PULS	A,B,X,Y,PC
02537 COMMON	LDX	SCRST
02538 	LEAX	$B20,X
02539 	LDA	SHPPOS
02540 COMMN1	TFR	A,B
02541 	ANDA	#3
02542 	LSLA
02543 	LSRB
02544 	LSRB
02545 	ABX
02546 	LDY	#$5F98
02547 	LDY	A,Y
02548 	LDB	#6
02549 	STB	CNLIN1
02550 	RTS
02551 CHEQ	JSR	COMMON
02552 LINCMP	CLRA
02553 	LDD	,Y++
02554 	LSLA
02555 	LSLB
02556 	ANDA	,X+
02557 	BNE	SHOCK
02558 	ANDB	,X+
02559 	BNE	SHOCK
02560 	CLRA
02561 	LDD	,Y++
02562 	LSLA
02563 	LSLB
02564 	ANDA	,X+
02565 	BNE	SHOCK
02566 	ANDB	,X
02567 	BNE	SHOCK
02568 	LEAX	$1D,X
02569 	DEC	CNLIN1
02570 	BNE	LINCMP
02571 	RTS
02572 SHOCK	LBRA	BLOWUP
02573 DAVID	LDU	#XPOS
02574 	LDB	#8
02575 	STB	CNLIN1
02576 REPET	TST	10,U
02577 	BEQ	NREPET
02578 	LDA	1,U
02579 	ADDA	3,U
02580 	DECA
02581 	CMPA	#$59
02582 	BLO	NREPET
02583 	LDB	5,U
02584 	CMPB	#1
02585 	BEQ	FLAGS
02586 	CMPB	#3
02587 	BEQ	QUBES
02588 	CMPB	#6
02589 	BEQ	PSYCHS
02590 NREPET	LEAU	11,U
02591 	DEC	CNLIN1
02592 	BNE	REPET
02593 	RTS
02594 FLAGS	CLRA
02595 	LDB	1,U
02596 	INCB
02597 	JSR	CHECKE
02598 	ADDA	#6
02599 	JSR	CHECKE
02600 	LDA	#5
02601 	STA	CNLIN
02602 	INCB
02603 FLAG1	JSR	CHECKE
02604 	DECA
02605 	BEQ	NREPET
02606 	BRA	FLAG1
02607 PSYCHS	TST	4,U
02608 	BNE	NREPET
02609 	LDB	3,U
02610 	STB	CNLIN
02611 	LDB	1,U
02612 	CLRA
02613 PSY1	JSR	CHECKE
02614 	EORA	#2
02615 	JSR	CHECKE
02616 	EORA	#2
02617 	INCB
02618 	DEC	CNLIN
02619 	BNE	PSY1
02620 	LDA	#1
02621 	LDB	1,U
02622 	ADDB	3,U
02623 	DECB
02624 	JSR	CHECKE
02625 	BRA	NREPET
02626 QUBES	LDB	4,U
02627 	CMPB	#4
02628 	BCC	NREPET
02629 	TSTB
02630 	BEQ	NREPET
02631 	DECB
02632 	LDX	#LNQUTB
02633 	LDA	B,X
02634 	LDB	3,U
02635 	STB	CNLIN
02636 	LDB	1,U
02637 QUB1	JSR	CHECKE
02638 	NEGA
02639 	ADDA	#6
02640 	JSR	CHECKE
02641 	NEGA
02642 	ADDA	#6
02643 	INCB
02644 	DEC	CNLIN
02645 	BNE	QUB1
02646 	NEGA
02647 	ADDA	#6
02648 	PSHS	A
02649 	SUBA	#4
02650 	CLRB
02651 	LSLA
02652 	ADDA	#3
02653 	STA	CNLIN
02654 	LDB	1,U
02655 	ADDB	3,U
02656 	DECB
02657 	PULS	A
02658 QUB3	JSR	CHECKE
02659 	DECA
02660 	DEC	CNLIN
02661 	BNE	QUB3
02662 	LBRA	NREPET
02663 LNQUTB	FCB	2
02664 	FCB	1
02665 	FCB	0
02666 CHECKE	PSHS	B,A
02667 	SUBB	#$59
02668 	BCS	CHKOUT
02669 	ADDA	,U
02670 	SUBA	SHPPOS
02671 	BCS	CHKOUT
02672 	CMPA	#13
02673 	BCC	CHKOUT
02674 	TSTB
02675 	BEQ	CHKTRT
02676 	CMPA	#12
02677 	BEQ	TIPS
02678 	TSTA
02679 	BEQ	TIPS
02680 	CMPB	#5
02681 	BCC	CHKOUT
02682 	CMPB	#1
02683 	LBNE	BLOWUP
02684 	CMPA	#5
02685 	BCS	CHKTRT
02686 	CMPA	#8
02687 	BCC	CHKTRT
02688 	LBRA	BLOWUP
02689 CHKTRT	CMPA	#2
02690 	LBEQ	BLOWUP
02691 	CMPA	#10
02692 	LBEQ	BLOWUP
02693 	BRA	CHKOUT
02694 TIPS	CMPB	#3
02695 	LBEQ	BLOWUP
02696 CHKOUT	PULS	A,B,PC
02697 OFF	LDX	SCRST
02698 	LEAX	$B20,X
02699 	LDA	SHPOS1
02700 	JSR	COMMN1
02701 LINOFF	LDD	,Y++
02702 	COMA
02703 	COMB
02704 	ANDA	,X
02705 	ANDB	1,X
02706 	STD	,X++
02707 	LDD	,Y++
02708 	COMA
02709 	COMB
02710 	ANDA	,X
02711 	ANDB	1,X
02712 	STD	,X
02713 	LEAX	$1E,X
02714 	DEC	CNLIN1
02715 	BNE	LINOFF
02716 	RTS
02717 ON	JSR	COMMON
02718 LINON	LDD	,Y++
02719 	ORA	,X
02720 	ORB	1,X
02721 	STD	,X++
02722 	LDD	,Y++
02723 	ORA	,X
02724 	ORB	1,X
02725 	STD	,X
02726 	LEAX	$1E,X
02727 	DEC	CNLIN1
02728 	BNE	LINON
02729 	RTS
02730 ADDPNT	PSHS	Y,X
02731 	LDB	#6
02732 	STB	NONUM
02733 	LDX	#PLYNOT
02734 	CLRA
02735 	LDA	PLYNO
02736 	LSLA
02737 	LDX	A,X
02738 	STX	YSTOR
02739 	DECB
02740 	LEAX	5,X
02741 	LEAU	B,U
02742 BIG2	LDA	,X
02743 	ADDA	,U
02744 	CMPA	#$0A
02745 	BCC	BIGGER
02746 BIG1	STA	,X
02747 	LEAX	-1,X
02748 	LEAU	-1,U
02749 	DEC	NONUM
02750 	BNE	BIG2
02751 	BRA	DNUPSC
02752 BIGGER	SUBA	#$0A
02753 	INC	-1,X
02754 	LDB	NONUM
02755 	CMPB	#3
02756 	BNE	BIG1
02757 	LDB	#32
02758 	STB	BEEPER
02759 	BRA	BIG1
02760 DNUPSC	LDY	#SCRTBL
02761 TRNXTW	TST	5,Y
02762 	BNE	TRNXON
02763 	LDX	YSTOR
02764 	STX	3,Y
02765 	LDA	#1
02766 	STA	5,Y
02767 	STA	1,Y
02768 	LDA	#$FF
02769 	STA	6,Y
02770 	LDA	PLYNO
02771 	LDB	#91
02772 	MUL
02773 	INCB
02774 	STB	,Y
02775 	LDA	#9
02776 	STA	2,Y
02777 	PULS	X,Y
02778 	RTS
02779 TRNXON	LEAY	7,Y
02780 	BRA	TRNXTW
02781 PRNSTR	LDA	,U+
02782 	TSTA
02783 	BEQ	PRNOUT
02784 	ORA	#$40
02785 	STA	,X+
02786 	BRA	PRNSTR
02787 PRNOUT	RTS
02788 LEVELS	CLRA
02789 	LDA	PLYNO
02790 	LDX	#PLYNOT
02791 	LSLA
02792 	LDX	A,X
02793 	LDA	,X+
02794 	TSTA
02795 	BEQ	LEV0X0
02796 	DECA
02797 	BEQ	LEV1X0
02798 	DECA
02799 	BEQ	LEV2X0
02800 LEV3X0	LDA	#20
02801 LEV3L0	STA	LEVEL
02802 	BRA	LEVFIX
02803 LEV2X0	LDB	#18
02804 	JSR	LEVCK1
02805 	TFR	B,A
02806 	BRA	LEV3L0
02807 LEV0X0	LDA	,X+
02808 	CMPA	#5
02809 	BCC	LEV0H0
02810 	CLRB
02811 	LSLA
02812 	TFR	A,B
02813 	JSR	LEVCK1
02814 	TFR	B,A
02815 	BRA	LEV3L0
02816 LEV0H0	ADDA	#5
02817 	BRA	LEV3L0
02818 LEV1X0	LDB	#15
02819 	JSR	LEVCHK
02820 	TFR	B,A
02821 	BRA	LEV3L0
02822 LEVCHK	LDA	,X
02823 	CMPA	#2
02824 	BCS	LEVRT1
02825 	INCB
02826 LEVCK1	LDA	,X
02827 	CMPA	#5
02828 	BCS	LEVRT1
02829 	INCB
02830 LEVRT1	RTS
02831 LEVFIX	LDA	LEVEL
02832 	LDX	#$546C
02833 	LDB	A,X
02834 	STB	CYCPRB
02835 	LDX	#$5481
02836 	LDB	A,X
02837 	STB	BONBYT
02838 	CLRB
02839 	LSLA
02840 	LDX	#$539A
02841 	LEAX	A,X
02842 	LDB	,X+
02843 	STB	FLGNO
02844 	LDB	,X
02845 	STB	FLGPRB
02846 	LDX	#$53EE
02847 	LEAX	A,X
02848 	LDB	,X+
02849 	STB	CRSNO
02850 	LDB	,X
02851 	STB	CRSPRB
02852 	LDX	#$53C4
02853 	LEAX	A,X
02854 	LDB	,X+
02855 	STB	QUBNO
02856 	LDB	,X
02857 	STB	QUBPRB
02858 	LDX	#$5418
02859 	LEAX	A,X
02860 	LDB	,X+
02861 	STB	STMNO
02862 	LDB	,X
02863 	STB	STMPRB
02864 	LDX	#$5442
02865 	LEAX	A,X
02866 	LDB	,X+
02867 	STB	STRNO
02868 	LDB	,X
02869 	STB	ARMPRB
02870 	LDX	#$5496
02871 	LDX	A,X
02872 	STX	LEVDEL
02873 	LDA	LEVEL
02874 	LDB	#6
02875 	MUL
02876 	LDX	#LEVBON
02877 	LDU	#$54C0
02878 	LEAU	D,U
02879 	LDB	#6
02880 	STB	LOOPER
02881 BONLP7	LDA	,U+
02882 	STA	,X+
02883 	DEC	LOOPER
02884 	BNE	BONLP7
02885 	RTS
02886 REVERS	PSHS	X,B,A
02887 	LDX	$5D8D
02888 RVRS1	LDD	,X
02889 	COMA
02890 	COMB
02891 	STD	,X++
02892 	CMPX	#$1A00
02893 	BLO	RVRS1
02894 	LDX	#5
02895 LOPDEL	LEAX	-1,X
02896 	BNE	LOPDEL
02897 	PULS	A,B,X,PC
02898 GMOVER	LDU	#$5840
02899 	LDX	#$10A9
02900 	LDB	#7
02901 	STB	LOOPER
02902 GMOVLP	LDB	#14
02903 	STB	LINCNT
02904 GMOVL1	LDA	,U+
02905 	ANDA	#$AA
02906 	STA	,X+
02907 	DEC	LINCNT
02908 	BNE	GMOVL1
02909 	LEAX	18,X
02910 	DEC	LOOPER
02911 	BNE	GMOVLP
02912 	JSR	DELAY1
02913 	JSR	DELAY1
02914 	JSR	CLS
02915 	JSR	DELAY1
02916 	RTS
02917 PLYMS	JSR	MKSTBL
02918 	JSR	PUTSTR
02919 	LDY	#$58A4
02920 	LDX	#$10AA
02921 	LDB	#10
02922 	STB	LOOPER
02923 PLYMLP	LDB	#9
02924 	STB	LINCNT
02925 PLYML1	LDA	,Y+
02926 	ANDA	#$55
02927 	STA	,X+
02928 	DEC	LINCNT
02929 	BNE	PLYML1
02930 	LEAX	23,X
02931 	DEC	LOOPER
02932 	BNE	PLYMLP
02933 	LDX	#NOTBL
02934 	CLRA
02935 	LDA	PLYNO
02936 	LSLA
02937 	LDX	A,X
02938 	LDB	#7
02939 	STB	LOOPER
02940 	LDU	#$10B4
02941 PLYML2	LDA	,X+
02942 	ANDA	#$55
02943 	STA	,U+
02944 	LDA	,X+
02945 	ANDA	#$55
02946 	STA	,U+
02947 	LEAU	30,U
02948 	DEC	LOOPER
02949 	BNE	PLYML2
02950 	JSR	DELAY1
02951 	JSR	DELAY1
02952 	JSR	CLS
02953 	LDX	#0
02954 	JSR	DELAY3
02955 	RTS
02956 NOTBL	FDB	$5900
02957 	FDB	$5910
02958 DELAY1	LDX	#$E848
02959 DELAY2	LEAX	-1,X
02960 	BNE	DELAY2
02961 DELAY3	LEAX	-1,X
02962 	BNE	DELAY3
02963 	RTS
02964 CLS	LDX	#$1000
02965 CLS1	CLR	,X+
02966 	CMPX	#$1200
02967 	BLO	CLS1
02968 	RTS
02969 CLRSTR	LDX	#STRTBL
02970 CLRS1	CLR	,X+
02971 	CMPX	#STREND
02972 	BLO	CLRS1
02973 	RTS
02974 MOVSTR	LDA	STRCNT
02975 	INCA
02976 	CMPA	#3
02977 	BCC	MVSTR1
02978 	STA	STRCNT
02979 	RTS
02980 MVSTR1	CLR	CNSTDD
02981 	CLR	STRCNT
02982 	LDX	#STRTBL
02983 MVSTR3	TST	2,X
02984 	BEQ	MVSTR2
02985 	LDA	,X
02986 	STA	$5DBE
02987 	LDA	1,X
02988 	LSRA
02989 	STA	$5DBF
02990 	CLR	$5DBD
02991 	JSR	$5D8F
02992 	JSR	$5D21
02993 	LDA	$5D40
02994 	ANDA	#$3
02995 	CMPA	#$7F
02996 	BEQ	STPSTR
02997 	LDA	1,X
02998 	ADDA	4,X
02999 	STA	1,X
03000 	CMPA	#$C0
03001 	BCC	STPSTR
03002 	CMPA	#$B0
03003 	BCS	MVSTR4
03004 	LDA	,X
03005 	ADDA	#3
03006 	LDB	SHPPOS
03007 	STB	,-S
03008 	CMPA	,S+
03009 	BCS	MVSTR4
03010 	LDB	SHPPOS
03011 	ADDB	#15
03012 	ADDB	#4
03013 	STB	,-S
03014 	CMPA	,S+
03015 	BCS	STPSTR
03016 MVSTR4	LDA	3,X
03017 	STA	COLOR
03018 	LDA	,X
03019 	STA	XPOINT
03020 	LDA	1,X
03021 	LSRA
03022 	STA	YPOINT
03023 	JSR	SET1
03024 	BRA	MVSTR2
03025 STPSTR	CLR	2,X
03026 	INC	CNSTDD
03027 MVSTR2	LEAX	5,X
03028 	CMPX	#STREND
03029 	BLO	MVSTR3
03030 MKFRLS	TST	CNSTDD
03031 	BEQ	MKOUT
03032 	LDX	#STRTBL
03033 MKFRL2	TST	2,X
03034 	BNE	MKFRL1
03035 	JSR	RNDSTR
03036 	JSR	LRNDY
03037 	DEC	CNSTDD
03038 	BEQ	MKOUT
03039 MKFRL1	LEAX	5,X
03040 	BRA	MKFRL2
03041 MKOUT	RTS
03042 PUTSTR	PSHS	Y,X,B,A
03043 	LDX	#STRTBL
03044 PTSTR2	TST	2,X
03045 	BEQ	PTSTR1
03046 	LDA	3,X
03047 	STA	COLOR
03048 	LDA	,X
03049 	STA	XPOINT
03050 	LDA	1,X
03051 	LSRA
03052 	STA	YPOINT
03053 	JSR	SET1
03054 PTSTR1	LEAX	5,X
03055 	CMPX	#STREND
03056 	BLO	PTSTR2
03057 	PULS	A,B,X,Y,PC
03058 MKSTBL	PSHS	X,B,A
03059 	JSR	CLRSTR
03060 	LDX	#STRTBL
03061 	LDB	#24
03062 	STB	CNTSTR
03063 MKSTB1	JSR	RNDSTR
03064 	LEAX	5,X
03065 	DEC	CNTSTR
03066 	BNE	MKSTB1
03067 	PULS	A,B,X,PC
03068 RNDSTR	JSR	$5D21
03069 	LDA	$5D3F
03070 	ANDA	#3
03071 	INCA
03072 	STA	4,X
03073 	LDA	$5D40
03074 	ANDA	#1
03075 	PSHS	X
03076 	LDX	#COLTBL
03077 	LDA	A,X
03078 	PULS	X
03079 	STA	3,X
03080 	LDA	#1
03081 	STA	2,X
03082 	JSR	$5D21
03083 	LDA	$5D3F
03084 	ANDA	#$7F
03085 	STA	,X
03086 NGAOD2	LDA	$5D40
03087 	ANDA	#$7F
03088 	CMPA	#9
03089 	BCS	NGAOD1
03090 	CMPA	#$56
03091 	BCC	NGAOD1
03092 	LSLA
03093 	STA	1,X
03094 	RTS
03095 NGAOD1	JSR	$5D21
03096 	BRA	NGAOD2
03097 LRNDY	PSHS	X,B,A
03098 	JSR	$5D21
03099 	LDA	$5D40
03100 	ANDA	#$7F
03101 	LSRA
03102 	LSRA
03103 	ADDA	#18
03104 	STA	1,X
03105 	PULS	A,B,X,PC
03106 SET1	PSHS	Y,X,B,A
03107 	LDX	#$E00
03108 	LDA	YPOINT
03109 	LDB	#$20
03110 	MUL
03111 	LEAX	D,X
03112 	LDB	XPOINT
03113 	LDA	XPOINT
03114 	LSRB
03115 	LSRB
03116 	ANDA	#3
03117 	ABX
03118 	LDY	#PIXTBL
03119 	LDB	A,Y
03120 	ANDB	COLOR
03121 	ORB	,X
03122 	STB	,X
03123 	PULS	A,B,X,Y,PC
03124 PIXTBL	FCB	$C0
03125 	FCB	$30
03126 	FCB	$0C
03127 	FCB	$03
03128 COLOR	FCB	0
03129 XPOINT	FCB	0
03130 YPOINT	FCB	0
03131 STRCNT	FCB	0
03132 CNTSTR	FCB	0
03133 CNSTDD	FCB	0
03134 COLTBL	FCB	$55
03135 	FCB	$FF
03136 STRTBL	EQU	$2000
03137 STREND	EQU	$2078
03138 JOYIN	TST	JOYKEY
03139 	BEQ	JOYSTK
03140 	CLR	DIR
03141 	CLR	BUTPRS
03142 	LDB	#$DF
03143 	STB	$FF02
03144 	LDA	$FF00
03145 	ANDA	#$7F
03146 	BITA	#8
03147 JOYN1	EQU	.-1
03148 	BNE	NOLFT
03149 	LDA	DIR
03150 	ORA	#1
03151 	STA	DIR
03152 NOLFT	LSLB
03153 	ORB	#1
03154 	STB	$FF02
03155 	LDA	$FF00
03156 	ANDA	#$7F
03157 	BITA	#8
03158 JOYN2	EQU	.-1
03159 	BNE	NORT
03160 	LDA	DIR
03161 	ORA	#2
03162 	STA	DIR
03163 NORT	LSLB
03164 	ORB	#1
03165 	STB	$FF02
03166 	LDA	$FF00
03167 	ANDA	#$7F
03168 	BITA	#8
03169 JOYN3	EQU	.-1
03170 	BNE	NOSHT
03171 	LDA	#1
03172 	STA	BUTPRS
03173 NOSHT	LDA	DIR
03174 	CMPA	#3
03175 	BNE	NONOTH
03176 	CLRA
03177 	STA	DIR
03178 NONOTH	RTS
03179 JOYSTK	LDA	$FF23
03180 	LDB	$FF20
03181 	STB	STSN
03182 	ANDA	#$F7
03183 	STA	$FF23
03184 	JSR	[$A00A]
03185 	LDB	STSN
03186 	STB	$FF20
03187 	LDA	$FF23
03188 	ORA	#8
03189 	STA	$FF23
03190 	LDA	PLYNO
03191 	ADDA	#0
03192 	LDX	#$15A
03193 	LSLA
03194 	LDB	A,X
03195 	STB	CURNTX
03196 	CMPB	#16
03197 	BCC	NORM
03198 	LDB	#1
03199 	STB	DIR
03200 	BRA	NORM2
03201 NORM	CMPB	#48
03202 	BCS	NORM1
03203 	LDB	#2
03204 	STB	DIR
03205 	BRA	NORM2
03206 NORM1	CLR	DIR
03207 NORM2	LDA	$FF00
03208 	COMA
03209 	LDB	PLYNO
03210 	LDX	#BUTTBL
03211 	ANDA	B,X
03212 	STA	BUTPRS
03213 	RTS
03214 WHOP1	JSR	WHOP
03215 	JSR	WHOP
03216 	JSR	WHOP
03217 	RTS
03218 WHOP	LDD	#$76
03219 WHOOP	STD	$5CF2
03220 	STD	$5D03
03221 	JSR	$5CC8
03222 	JSR	$5CC8
03223 	LDD	$5CF2
03224 	DECB
03225 	DECB
03226 	BNE	WHOOP
03227 	RTS
03228 BONCHK	TST	BROUND
03229 	LBEQ	CHEKD1
03230 	CLR	BONCNT
03231 	LDA	BROUND
03232 	ANDA	#1
03233 	EORA	#1
03234 	LDU	#XPOS
03235 	CLRB
03236 	LSLA
03237 	LDB	#8
03238 	STB	CNTDED
03239 	LDX	#$5356
03240 	LDX	A,X
03241 	STB	CNLIN1
03242 TBLOP	LDD	,X++
03243 	STD	,U
03244 	LDD	,X++
03245 	STD	6,U
03246 	LDD	#$306
03247 	STD	2,U
03248 	CLRA
03249 	CLRB
03250 	STD	4,U
03251 	LDD	#$5DF1
03252 	STD	8,U
03253 	LDA	#1
03254 	STA	10,U
03255 	LEAU	11,U
03256 	DEC	CNLIN1
03257 	BNE	TBLOP
03258 	LDA	#$0C
03259 	STA	BONBYT
03260 	LDA	BROUND
03261 	CMPA	#1
03262 	BNE	TBLOP1
03263 	LDA	#$10
03264 	STA	BONBYT
03265 TBLOP1	LBRA	CHKED
03266 PUTX	PSHS	U,Y,X
03267 	LDU	#TABX
03268 TABX1	TST	,U+
03269 	BEQ	OUT
03270 	LDB	-1,U
03271 	CLRA
03272 	TFR	B,A
03273 	ANDA	#3
03274 	LSLA
03275 	LDY	#TX1
03276 	LDY	A,Y
03277 	LSRB
03278 	LSRB
03279 	LDX	#$1940
03280 	ABX
03281 	JSR	XPUT
03282 	JSR	XPUT
03283 	JSR	XPUT
03284 	LEAX	-160,X
03285 	LEAY	2,Y
03286 	JSR	XPUT
03287 	JSR	XPUT
03288 	BRA	TABX1
03289 OUT	PULS	X,Y,U,PC
03290 XPUT	LDD	,Y
03291 	ORA	,X
03292 	ORB	1,X
03293 	STD	,X
03294 	LEAX	$40,X
03295 	RTS
03296 BONRND	TST	BROUND
03297 	BEQ	BONRN1
03298 	LDX	#0
03299 	JSR	DELAY3
03300 	LDA	BROUND
03301 	STA	$52C9
03302 	JSR	$517E
03303 	JSR	DELAY1
03304 	JSR	CLS
03305 	LDX	#0
03306 	JSR	DELAY3
03307 	LDA	BROUND
03308 	ANDA	#2
03309 	BEQ	BONRN1
03310 	LDA	#7
03311 	STA	NOWGUY
03312 BONRN1	JMP	SHEET
03313 BUTTBL	FDB	$0102
03314 CLTBL2	FCB	$FF
03315 	FCB	$55
03316 TBSTVL	FCB	$80
03317 	FCB	$20
03318 	FCB	$8
03319 	FCB	$2
03320 SPXCNT	FCB	4
03321 HTPOD	FCB	0
03322 BBBUFF	FDB	0
03323 	FDB	$200
03324 	FDB	0
03325 TABX	FDB	0
03326 	FDB	0
03327 	FDB	0
03328 	FDB	0
03329 TX1	FDB	X1
03330 	FDB	X2
03331 	FDB	X3
03332 	FDB	X4
03333 X1	FDB	$8880
03334 	FDB	$2200
03335 X2	FDB	$2220
03336 	FDB	$0880
03337 X3	FDB	$0888
03338 	FDB	$0220
03339 X4	FDB	$0222
03340 	FDB	$0088
03341 BROUND	FCB	0
03342 BROND1	FCB	0
03343 BROND2	FCB	0
03344 CYCLE1	FCB	0
03345 STSN	FCB	0
03346 PRMUT1	FCB	0
03347 PERMUT	FCB	0
03348 PLAYER	FCB	0
03349 SCRPOS	FDB	0
03350 INPLCE	FCB	0
03351 INPLOC	FDB	0
03352 ALARM	FCB	0
03353 ALARM1	FCB	0
03354 BEEPER	FCB	0
03355 BEEPR1	FCB	0
03356 STORY	FDB	0
03357 TMCRTC	FCB	0
03358 BARCOL	FCB	0
03359 BONCNT	FCB	0
03360 BONAMT	FCB	0
03361 CNTDED	FCB	0
03362 CNTER	FCB	$20
03363 SHTTHR	FCB	0
03364 SCROFF	FCB	0
03365 SHPZAP	FCB	0
03366 NOWGUY	FCB	1
03367 NWGY1	FCB	1
03368 LEVEL	EQU	$5AA4
03369 ERR	FCB	0
03370 STXEND	FDB	0
03371 STXST	FDB	0
03372 STYEND	FDB	0
03373 STYST	FDB	0
03374 FLGPRB	FCB	0
03375 CRSPRB	FCB	0
03376 QUBPRB	FCB	0
03377 STMPRB	FCB	0
03378 ARMPRB	FCB	0
03379 CYCPRB	FCB	$7F
03380 FLGNO	FCB	8
03381 CRSNO	FCB	5
03382 QUBNO	FCB	3
03383 STMNO	FCB	3
03384 STRNO	FCB	4
03385 LEVDEL	FDB	$800
03386 BONBYT	FCB	$1C
03387 DELAY	FDB	0
03388 LEVBON	FDB	0
03389 	FDB	0
03390 	FDB	$100
03391 NONUM	FCB	0
03392 DIGITS	FCB	0
03393 NOFNUM	FCB	0
03394 SHFTBT	FCB	0
03395 BTINUM	FCB	0
03396 YSTOR	FDB	0
03397 SHCON	FCB	0
03398 SHOT1F	FCB	0
03399 SHOT2F	FCB	0
03400 SHOT1X	FCB	0
03401 SHOT2X	FCB	0
03402 SHOTY	FCB	0
03403 DIR	FCB	0
03404 JOYKEY	FCB	0
03405 BUTPRS	FCB	0
03406 BUTPR1	FCB	0
03407 CURNTX	FCB	0
03408 SHPPOS	EQU	$5AA5
03409 SHPOS1	FCB	$0
03410 CYCLE	FCB	0
03411 CNLIN1	FCB	0
03412 CNLIN	FCB	0
03413 NOPLAY	FCB	0
03414 PLYNO	FCB	0
03415 SCRST	EQU	$5D8D
03416 LINCNT	FCB	0
03417 SRBYTE	FCB	0
03418 CNTLIN	FCB	0
03419 LOOPER	FCB	0
03420 LOP1	FCB	0
03421 LOP2	FCB	0
03422 XPOS	RMB	108
03423 P500	FDB	0
03424 	FDB	5
03425 	FDB	0
03426 BONBUF	FDB	0
03427 	FDB	0
03428 	FDB	0
03429 EMPBUF	FDB	$0A0A
03430 	FDB	$0A0A
03431 	FDB	$0A0A
03432 	FDB	$0A0A
03433 	FDB	$0A0A
03434 	FDB	$0A0A
03435 PLYNOT	FDB	PLY1SC
03436 	FDB	PLY2SC
03437 PLY1SC	FDB	0
03438 	FDB	0
03439 	FDB	0
03440 	FCB	$0A
03441 	FDB	3
03442 PLY2SC	FDB	0
03443 	FDB	0
03444 	FDB	0
03445 	FCB	$0A
03446 	FDB	3
03447 SHTTBL	RMB	80
03448 RNDNUM	FDB	0
03449 	FDB	0
03450 SCRTBL	RMB	80
03451 SCRSTB	RMB	80
03452 	FCC	/(C) 1984 BY DAVE SHADOFF/
03453 LAST	EQU	.-1
03454 	END	ORIGIN
